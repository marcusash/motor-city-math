<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra 2 - Inverse Functions Practice Quiz</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        input, textarea {
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 0;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #8B1E3F;
        }

        h1 {
            color: #8B1E3F;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 400;
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .question-card {
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-left: 4px solid #8B1E3F;
            padding: 30px;
            margin-bottom: 25px;
            border-radius: 0;
            transition: box-shadow 0.2s;
        }

        .question-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .question-number {
            color: #8B1E3F;
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            color: #333;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .chart-container {
            max-width: 700px;
            height: 450px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        .input-group textarea {
            width: 100%;
            padding: 14px;
            padding-bottom: 20px;
            padding-right: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            min-height: 80px;
            font-family: inherit;
            transition: border-color 0.3s;
            resize: vertical;
            box-sizing: border-box;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        .submit-btn {
            background: #8B1E3F;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 40px auto 20px;
            transition: background 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .submit-btn:hover {
            background: #6B1530;
        }

        .print-btn {
            background: white;
            color: #8B1E3F;
            border: 2px solid #8B1E3F;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .print-btn:hover {
            background: #8B1E3F;
            color: white;
        }

        .answer-key-btn {
            background: #8B1E3F;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .answer-key-btn:hover {
            background: #6B1530;
        }

        .answer-key-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }

        .answer-key-content {
            background: white;
            max-width: 1000px;
            margin: 50px auto;
            padding: 40px;
            border-radius: 0;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
            padding: 0;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
        }

        .close-modal:hover {
            color: #000;
        }

        .answer-key-title {
            color: #8B1E3F;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 400;
            letter-spacing: -0.5px;
            padding-bottom: 20px;
            border-bottom: 3px solid #8B1E3F;
        }

        .answer-item {
            background: #ffffff;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            border-left: 4px solid #8B1E3F;
            border-radius: 0;
            transition: box-shadow 0.2s;
        }

        .answer-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .answer-item strong {
            color: #8B1E3F;
            font-weight: 600;
        }

        .work-area {
            background: #fafafa;
            border: 1px solid #d0d0d0;
            border-radius: 0;
            padding: 20px;
            margin: 20px 0;
            min-height: 120px;
        }

        .work-area textarea {
            width: 100%;
            min-height: 100px;
            border: 2px solid #ddd;
            background: white;
            resize: vertical;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 0.95em;
            padding: 14px;
            padding-bottom: 20px;
            padding-right: 20px;
            border-radius: 8px;
            box-sizing: border-box;
        }

        .custom-resize-handle {
            position: absolute;
            bottom: 12px;
            right: 12px;
            width: 16px;
            height: 16px;
            cursor: ns-resize;
            color: #999;
            font-size: 20px;
            line-height: 12px;
            user-select: none;
            transform: rotate(90deg);
        }

        .work-label {
            font-weight: 600;
            color: #8B1E3F;
            margin-bottom: 10px;
            display: block;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }

        .final-answer-box {
            background: #fafafa;
            border: 2px solid #8B1E3F;
            border-radius: 0;
            padding: 20px;
            margin-top: 15px;
        }

        .final-answer-label {
            font-weight: 600;
            color: #8B1E3F;
            margin-bottom: 12px;
            display: block;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color: #000 !important;
                background: white !important;
                border-color: #000 !important;
            }

            body {
                background: white !important;
                padding: 0;
            }

            .container {
                box-shadow: none;
                padding: 20px;
                max-width: 100%;
                background: white !important;
            }

            .question-card {
                background: white !important;
                border: 2px solid #000 !important;
                border-left: 5px solid #000 !important;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }

            .question-number {
                color: #000 !important;
                border-bottom: 1px solid #000;
                padding-bottom: 5px;
            }

            .chart-container {
                border: 1px solid #000 !important;
                background: white !important;
                page-break-inside: avoid !important;
                height: auto !important;
                max-height: none !important;
                overflow: visible !important;
            }

            canvas {
                -webkit-filter: grayscale(100%) !important;
                filter: grayscale(100%) !important;
                max-width: 100% !important;
                height: auto !important;
                max-height: none !important;
            }

            input, textarea {
                border: 1px solid #000 !important;
                background: white !important;
                color: #000 !important;
                padding: 14px !important;
                box-sizing: border-box !important;
            }
            
            textarea {
                padding-bottom: 20px !important;
                padding-right: 20px !important;
            }

            .submit-btn, .print-btn, .result, .answer-feedback, .answer-key-btn {
                display: none !important;
            }

            .work-area {
                border: 1px solid #000 !important;
                background: white !important;
                min-height: 80px;
            }

            .final-answer-box {
                border: 2px solid #000 !important;
                background: white !important;
            }

            .final-answer-label {
                color: #000 !important;
            }

            header {
                border-bottom: 2px solid #000;
                background: white !important;
            }

            h1 {
                color: #000 !important;
            }

            .subtitle {
                color: #000 !important;
            }

            .question-text {
                color: #000 !important;
            }

            table {
                border: 1px solid #000;
            }

            table td, table th {
                border: 1px solid #000 !important;
                background: white !important;
                color: #000 !important;
            }

            table th {
                background: #e5e5e5 !important;
                color: #000 !important;
            }

            .math-notation {
                background: #e5e5e5 !important;
                border: 1px solid #000;
                color: #000 !important;
            }

            label, .work-label {
                color: #000 !important;
            }
        }

        .result {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            display: none;
        }

        .result.show {
            display: block;
        }

        .correct {
            color: #22c55e;
            background: #f0fdf4;
            border: 2px solid #22c55e;
        }

        .incorrect {
            color: #ef4444;
            background: #fef2f2;
            border: 2px solid #ef4444;
        }

        .answer-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
            white-space: pre-line;
        }

        .answer-feedback.show {
            display: block;
        }

        .math-notation {
            font-family: 'Courier New', monospace;
            background: #f5e6ea;
            padding: 3px 7px;
            border-radius: 2px;
            font-weight: 600;
            color: #8B1E3F;
        }

        table {
            width: 100%;
            max-width: 400px;
            margin: 15px auto;
            border-collapse: collapse;
        }

        table td, table th {
            border: 2px solid #8B1E3F;
            padding: 10px;
            text-align: center;
        }

        table th {
            background: #8B1E3F;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Algebra 2 - Inverse Functions Practice Quiz</h1>
            <div class="subtitle">Inverse Functions & Fraction Manipulation (15-20 minutes)</div>
            <div style="margin-top: 20px; padding: 15px; background: #fdf5f7; border-radius: 10px; border: 2px solid #8B1E3F;">
                <strong>Focus Areas:</strong>
                <ul style="margin: 10px 0 0 0; padding: 0; list-style: none; column-count: 2; column-gap: 30px; text-align: center;">
                    <li style="margin-bottom: 5px;">• Finding inverse functions from equations</li>
                    <li style="margin-bottom: 5px;">• Finding inverse values from tables and graphs</li>
                    <li style="margin-bottom: 5px;">• Solving real-world inverse function problems</li>
                    <li style="margin-bottom: 5px;">• Manipulating equations with fractions</li>
                </ul>
            </div>
        </header>

        <form id="testForm">
            <!-- Question 1: Finding inverse function algebraically -->
            <div class="question-card">
                <div class="question-number">Question 1</div>
                <div class="question-text">
                    Given <span class="math-notation">f(x) = (6x + 11)/7</span>:
                    <br><br>
                    a) Find the inverse function <span class="math-notation">f<sup>-1</sup>(x)</span>
                    <br>b) Verify your answer by computing <span class="math-notation">f(f<sup>-1</sup>(x)) = x</span>
                    <br>c) Find <span class="math-notation">f<sup>-1</sup>(9)</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your steps to find the inverse, verify it, and evaluate f⁻¹(9)..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>a) f<sup>-1</sup>(x) =</label>
                        <input type="text" id="q1a">
                    </div>
                    <div class="input-group">
                        <label>b) Verification (show f(f<sup>-1</sup>(x)) = x):</label>
                        <textarea id="q1b" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>c) f<sup>-1</sup>(9) =</label>
                        <input type="text" id="q1c">
                    </div>
                </div>
                <div class="answer-feedback" id="feedback1"></div>
            </div>

            <!-- Question 2: Table with inverse values -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    The table below shows values of the function <span class="math-notation">g(x)</span>:
                    <br><br>
                    <table>
                        <tr>
                            <th>x</th>
                            <th>g(x)</th>
                        </tr>
                        <tr><td>-4</td><td>-18</td></tr>
                        <tr><td>-1</td><td>-3</td></tr>
                        <tr><td>2</td><td>12</td></tr>
                        <tr><td>5</td><td>27</td></tr>
                        <tr><td>8</td><td>42</td></tr>
                    </table>
                    <br>
                    a) Find <span class="math-notation">g<sup>-1</sup>(27)</span>
                    <br>b) Find <span class="math-notation">g<sup>-1</sup>(12)</span>
                    <br>c) Is <span class="math-notation">g(x)</span> a linear function? Explain and write the equation for <span class="math-notation">g(x)</span>
                    <br>d) Find the inverse function <span class="math-notation">g<sup>-1</sup>(x)</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your work finding inverse values, determining if linear, and finding the inverse function..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>a) g<sup>-1</sup>(27) =</label>
                        <input type="text" id="q2a">
                    </div>
                    <div class="input-group">
                        <label>b) g<sup>-1</sup>(12) =</label>
                        <input type="text" id="q2b">
                    </div>
                    <div class="input-group">
                        <label>c) Is g(x) linear? Explain:</label>
                        <textarea id="q2c" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Equation for g(x):</label>
                        <input type="text" id="q2d">
                    </div>
                    <div class="input-group">
                        <label>d) g<sup>-1</sup>(x) =</label>
                        <input type="text" id="q2e">
                    </div>
                </div>
                <div class="answer-feedback" id="feedback2"></div>
            </div>

            <!-- Question 3: Real-world phone company problem -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    A streaming service charges for bandwidth usage according to the formula <span class="math-notation">C(g) = (8g + 45)/6</span>, where <span class="math-notation">g</span> is the number of gigabytes streamed and <span class="math-notation">C</span> is the cost in dollars.
                    <br><br>
                    a) Find the inverse function <span class="math-notation">C<sup>-1</sup>(g)</span> (solve for <span class="math-notation">g</span> in terms of <span class="math-notation">C</span>, then swap <span class="math-notation">g</span> and <span class="math-notation">C</span>)
                    <br>b) If your bill was $18, how many gigabytes did you stream?
                    <br>c) Verify your answer by substituting back into the original formula
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your steps to find the inverse, calculate gigabytes, and verify..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>a) Inverse function g =</label>
                        <input type="text" id="q3a">
                    </div>
                    <div class="input-group">
                        <label>b) Gigabytes for $18 bill:</label>
                        <input type="text" id="q3b">
                    </div>
                    <div class="input-group">
                        <label>c) Verification:</label>
                        <textarea id="q3c" style="min-height: 60px;"></textarea>
                    </div>
                </div>
                <div class="answer-feedback" id="feedback3"></div>
            </div>

            <!-- Question 4: Complex rational inverse -->
            <div class="question-card">
                <div class="question-number">Question 4</div>
                <div class="question-text">
                    Given <span class="math-notation">f(x) = (7x - 5)/(2x + 3)</span>:
                    <br><br>
                    a) Find the inverse function <span class="math-notation">f<sup>-1</sup>(x)</span>
                    <br>b) Verify your answer by showing that <span class="math-notation">f(f<sup>-1</sup>(4)) = 4</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your algebraic steps to find the inverse and verify it..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>a) f<sup>-1</sup>(x) =</label>
                        <input type="text" id="q4a">
                    </div>
                    <div class="input-group">
                        <label>b) Verification (show f(f<sup>-1</sup>(4)) = 4):</label>
                        <textarea id="q4b" style="min-height: 80px;"></textarea>
                    </div>
                </div>
                <div class="answer-feedback" id="feedback4"></div>
            </div>

            <button type="button" class="print-btn" onclick="window.print()">Print Version (Black & White)</button>
            <button type="button" class="answer-key-btn" onclick="showAnswerKey()">View Answer Key</button>
            <button type="button" class="answer-key-btn" onclick="saveResults()" style="background: #2563eb;">Save Results</button>
            <button type="button" class="answer-key-btn" onclick="loadResults()" style="background: #7c3aed;">Load Saved Results</button>
        </form>

        <div class="result" id="finalResult"></div>
    </div>

    <!-- Answer Key Modal -->
    <div id="answerKeyModal" class="answer-key-modal">
        <div class="answer-key-content">
            <button class="close-modal" onclick="closeAnswerKey()">×</button>
            <h2 class="answer-key-title">Answer Key</h2>
            <div id="answerKeyBody"></div>
        </div>
    </div>

    <script>
        // Custom resize handle positioning
        document.addEventListener('DOMContentLoaded', function() {
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(function(textarea) {
                // Disable default resize
                textarea.style.resize = 'none';
                
                // Create custom resize handle
                const resizeHandle = document.createElement('div');
                resizeHandle.className = 'custom-resize-handle';
                resizeHandle.innerHTML = '⋰';
                
                // Wrap textarea in container
                const wrapper = document.createElement('div');
                wrapper.style.position = 'relative';
                wrapper.style.display = 'inline-block';
                wrapper.style.width = '100%';
                textarea.parentNode.insertBefore(wrapper, textarea);
                wrapper.appendChild(textarea);
                wrapper.appendChild(resizeHandle);
                
                // Add resize functionality
                let startY, startHeight;
                resizeHandle.addEventListener('mousedown', function(e) {
                    startY = e.clientY;
                    startHeight = parseInt(window.getComputedStyle(textarea).height, 10);
                    document.addEventListener('mousemove', doResize);
                    document.addEventListener('mouseup', stopResize);
                    e.preventDefault();
                });
                
                function doResize(e) {
                    textarea.style.height = (startHeight + e.clientY - startY) + 'px';
                }
                
                function stopResize() {
                    document.removeEventListener('mousemove', doResize);
                    document.removeEventListener('mouseup', stopResize);
                }
            });
        });
        
        function showAnswerKey() {
            const answerKeyHTML = `
                <div class="answer-item"><strong>Question 1:</strong> Finding f⁻¹(x) for f(x) = (6x+11)/7
                    <br><br>
                    <strong>a) f⁻¹(x) = (7x - 11)/6</strong>
                    <br><br>
                    <em>Work:</em> Start with y = (6x + 11)/7
                    <br>Multiply both sides by 7: 7y = 6x + 11
                    <br>Subtract 11: 7y - 11 = 6x
                    <br>Divide by 6: x = (7y - 11)/6
                    <br>Swap x and y: f⁻¹(x) = (7x - 11)/6
                    <br><br>
                    <strong>b) Verification:</strong>
                    <br>f(f⁻¹(x)) = f((7x - 11)/6)
                    <br>= (6·(7x - 11)/6 + 11)/7
                    <br>= (7x - 11 + 11)/7
                    <br>= 7x/7
                    <br>= x ✓
                    <br><br>
                    <strong>c) f⁻¹(9) = 52/6 = 26/3 ≈ 8.67</strong>
                    <br><br>
                    <em>Work:</em> f⁻¹(9) = (7(9) - 11)/6 = (63 - 11)/6 = 52/6 = 26/3 ≈ 8.67
                </div>
                
                <div class="answer-item"><strong>Question 2:</strong> Table with g(x) values
                    <br><br>
                    <strong>a) g⁻¹(27) = 5</strong>
                    <br><em>Explanation:</em> Looking at the table, when g(x) = 27, x = 5, so g⁻¹(27) = 5
                    <br><br>
                    <strong>b) g⁻¹(12) = 2</strong>
                    <br><em>Explanation:</em> Looking at the table, when g(x) = 12, x = 2, so g⁻¹(12) = 2
                    <br><br>
                    <strong>c) Yes, g(x) is linear</strong>
                    <br><em>Explanation:</em> The differences in g(x) values are constant: 
                    <br>From -18 to -3: +15
                    <br>From -3 to 12: +15
                    <br>From 12 to 27: +15
                    <br>From 27 to 42: +15
                    <br>Since the rate of change is constant (+15 for every +3 in x), it's linear with slope = 15/3 = 5
                    <br><br>
                    <strong>Equation: g(x) = 5x + 2</strong>
                    <br><em>Work:</em> Slope m = 5, and when x = -1, g(x) = -3, so: -3 = 5(-1) + b → -3 = -5 + b → b = 2
                    <br>Therefore: g(x) = 5x + 2
                    <br><br>
                    <strong>d) g⁻¹(x) = (x - 2)/5</strong>
                    <br><em>Work:</em> Start with y = 5x + 2
                    <br>Subtract 2: y - 2 = 5x
                    <br>Divide by 5: x = (y - 2)/5
                    <br>Swap x and y: g⁻¹(x) = (x - 2)/5
                </div>
                
                <div class="answer-item"><strong>Question 3:</strong> Streaming service charges C(g) = (8g + 45)/6
                    <br><br>
                    <strong>a) Inverse function: C⁻¹(g) = (6g - 45)/8</strong>
                    <br><br>
                    <em>Work:</em> Start with C = (8g + 45)/6
                    <br>Multiply both sides by 6: 6C = 8g + 45
                    <br>Subtract 45: 6C - 45 = 8g
                    <br>Divide by 8: g = (6C - 45)/8
                    <br>Swap g and C: C⁻¹(g) = (6g - 45)/8
                    <br><br>
                    <strong>b) For a $18 bill: g = 63/8 = 7.875 gigabytes</strong>
                    <br><br>
                    <em>Work:</em> g = (6(18) - 45)/8 = (108 - 45)/8 = 63/8 = 7.875 gigabytes
                    <br><br>
                    <strong>c) Verification:</strong>
                    <br>C(7.875) = (8(7.875) + 45)/6 = (63 + 45)/6 = 108/6 = 18 ✓
                    <br>The answer checks out!
                </div>
                
                <div class="answer-item"><strong>Question 4:</strong> Find inverse of f(x) = (7x - 5)/(2x + 3)
                    <br><br>
                    <strong>a) f⁻¹(x) = (3x + 5)/(7 - 2x)</strong>
                    <br><br>
                    <em>Work:</em> Start with y = (7x - 5)/(2x + 3)
                    <br>Multiply both sides by (2x + 3): y(2x + 3) = 7x - 5
                    <br>Expand: 2xy + 3y = 7x - 5
                    <br>Collect x terms on left: 2xy - 7x = -5 - 3y
                    <br>Factor: x(2y - 7) = -3y - 5
                    <br>Divide: x = (-3y - 5)/(2y - 7) = (3y + 5)/(7 - 2y)
                    <br>Swap x and y: f⁻¹(x) = (3x + 5)/(7 - 2x)
                    <br><br>
                    <strong>b) Verification that f(f⁻¹(4)) = 4:</strong>
                    <br><br>
                    First find f⁻¹(4):
                    <br>f⁻¹(4) = (3(4) + 5)/(7 - 2(4)) = (12 + 5)/(7 - 8) = 17/(-1) = -17
                    <br><br>
                    Now compute f(-17):
                    <br>f(-17) = (7(-17) - 5)/(2(-17) + 3)
                    <br>= (-119 - 5)/(-34 + 3)
                    <br>= -124/(-31)
                    <br>= 4 ✓
                    <br><br>
                    Therefore f(f⁻¹(4)) = 4, which verifies our inverse is correct!
                </div>
            `;
            document.getElementById('answerKeyBody').innerHTML = answerKeyHTML;
            document.getElementById('answerKeyModal').style.display = 'block';
        }

        function closeAnswerKey() {
            document.getElementById('answerKeyModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('answerKeyModal');
            if (event.target === modal) {
                closeAnswerKey();
            }
        }

        function saveResults() {
            const formData = {};
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                if (input.id) {
                    formData[input.id] = input.value || input.textContent || '';
                }
            });
            
            const saveData = {
                timestamp: new Date().toISOString(),
                formData: formData
            };
            
            localStorage.setItem('algebra2QuizResults', JSON.stringify(saveData));
            alert('Results saved successfully! You can reload them anytime.');
        }

        function loadResults() {
            const saved = localStorage.getItem('algebra2QuizResults');
            if (!saved) {
                alert('No saved results found.');
                return;
            }
            
            const saveData = JSON.parse(saved);
            const savedDate = new Date(saveData.timestamp).toLocaleString();
            
            if (confirm(`Load results from ${savedDate}?`)) {
                Object.keys(saveData.formData).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.value = saveData.formData[id];
                        } else {
                            element.textContent = saveData.formData[id];
                        }
                    }
                });
                alert('Results loaded successfully!');
            }
        }
    </script>
</body>
</html>
