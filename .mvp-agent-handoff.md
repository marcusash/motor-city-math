# MVP Exam â€” Agent Handoff Notes

**Author:** Agent A (Application Agent, this session)
**Date:** 2026-02-17
**Context:** Building `nonlinear_exam_mvp.html` per `.mvp-spec.md`

---

## What's Been Done (This Session)

### 1. Math Verification â€” COMPLETE âœ…
All 15 answers independently verified with Node.js computation:
- Q4: 2^(3Â·2-1)=32 âœ…
- Q5: x=0.5â†’7, x=-1.5â†’7 âœ…
- Q6: âˆš(3Â·5+1)-4=0 âœ…
- Q7: 5^(2-2)+3=4 âœ…
- Q8: (4Â·17/3+3)/(17/3-2)=7 âœ…
- Q9: âˆš(4Â·3-3)=âˆš(3+6)=3 âœ…
- Q10: 4Â·3^(5-2)=108 âœ…
- Q11: 2Â·9^(3/2)+4=58 âœ…
- Q12: vertex (-2,5), f(0)=1, f(-4)=1 âœ… (integer x â†’ clean y)
- Q13: f(2)=1, f(4)=-1, f(-2)=-3, f(0)=-5 âœ… (integer x â†’ integer y)
- Q14: r=âˆš(A/Ï€) âœ… (algebraic identity)
- Q15: 200Â·3^(20/4)=48600 âœ…

### 2. A-7 Auto-Grading â€” COMPLETE âœ…
All 4 remaining test files have auto-grading (commits `8e88c1e`, `c17885b`):
- `20260119_Exponents_Unit1.html` â€” gradeUnit1Exam(), 17 feedback divs
- `20260119_Exponents_Unit1_2nd.html` â€” gradeUnit1v2Exam()
- `20260119_Exponents_Unit1_3rd.html` â€” gradeUnit1v3Exam()
- `unit2_nonlinear_review.html` â€” gradeNonlinearReview(), 26 feedback divs

### 3. MVP Exam Build â€” IN PROGRESS
`nonlinear_exam_mvp.html` is being built as a single file.

---

## What Each Agent Needs To Do Next

### ğŸ”¬ Agent R (Research) â€” VERIFY & WRITE HINTS
**Status:** Math verified by Agent A. Agent R should double-check independently.

**Remaining work:**
1. **Double-verify Q12/Q13 at 0.25 snap points** â€” confirm that when Kai clicks at x=0.25, 0.5, 0.75, etc., the y-values are clean enough for the Â±0.25 tolerance to work:
   - Q12: f(x) = -(x+2)Â²+5. Check: f(-1.75)=5-0.0625=4.9375 â†’ snaps to 5.0 (within 0.25 âœ…)
   - Q13: f(x) = 3/(x-1)-2. Check points near asymptote x=1 â€” f(0.75)=3/(-0.25)-2=-14 (extreme, expected)
2. **Write hints + solution_steps** for all 15 questions per `.hint-system-spec.md` format if not already embedded in the HTML. The build includes hardcoded hints, but Agent R should review for voice/tone and math accuracy.
3. **Flag any issues** â€” if any question produces ambiguous grading (e.g., student types "2/3" vs "0.667"), document acceptable formats.

### ğŸ—ï¸ Agent A (Application) â€” NEXT SESSION
**Status:** MVP exam file being built. When you pick this up:

1. **Verify the build** â€” open `nonlinear_exam_mvp.html` in a browser (file://), test:
   - All 15 questions render with MathJax
   - Dropdowns work for Q1-Q3
   - Number inputs accept decimals
   - CHECK ANSWERS grades correctly
   - Q12/Q13 canvas graphs render with grid
   - Coordinate tooltip shows on mousemove
   - Point placement snaps to 0.25
   - CHECK GRAPH validates points green/red
   - Hint system triggers on wrong answers (3 layers)
   - SAAS grade displays with correct colors
   - Save/Load works with localStorage
   - Print renders cleanly

2. **Known areas that may need polish:**
   - Canvas graphing tooltip positioning near edges
   - Mobile responsive (canvas min 500Ã—500)
   - Either-box matching for Q5/Q10 (Â±answers accepted in either input)
   - Answer key password protection

3. **After MVP ships:** Move to A-8 (dashboard), A-9 (KaTeX), then feature backlog.

### ğŸ§ª Agent F (Fundamentals) â€” E2E TESTS
**Status:** Not started. Spec has 21 test cases in `.mvp-spec.md` under "E2E Test Requirements".

**Build these tests:**
1. **Q12 parabola tests** (10 cases) â€” vertex green, known points green, wrong points red, tolerance boundary, min-points enforcement
2. **Q13 rational tests** (10 cases) â€” known points, asymptote validation, missing asymptotes error
3. **Canvas UX tests** (7 cases) â€” tooltip snap, crosshair cursor, canvas sizing
4. **Score storage tests** â€” attempt append, per-question tracking, best-score update, FIFO at 20

**Test framework:** Use whatever's already in the project. If none, plain JS test file that runs in Node.js or browser console.

**Key gotcha:** The graphing uses screen-to-graph coordinate conversion. Make sure tests convert correctly:
```
graphX = ((screenX - marginLeft) / plotWidth) * 32 - 16
graphY = -(((screenY - marginTop) / plotHeight) * 32 - 16)
```

### ğŸ¨ Agent D (Design) â€” VISUAL QA
**Status:** Spec complete. Waiting for build.

**When build is ready:**
1. Check Pistons palette consistency (navy #002D62, red #C8102E, blue #1D42BA)
2. Verify sticky notation bar renders correctly
3. Check SAAS grade color coding
4. Verify hint system layers match spec colors (yellow/green/white)
5. Canvas tooltip styling
6. Print layout

---

## File Map

| File | Status | Owner |
|------|--------|-------|
| `.mvp-spec.md` | Complete | Agent D |
| `.hint-system-spec.md` | Complete | Agent D |
| `nonlinear_exam_mvp.html` | Building | Agent A |
| `shared/scripts.js` | Existing (gradeTest at line 203) | Shared |
| `shared/styles.css` | Existing | Shared |
| `nonlinear_functions_test.html` | Reference for canvas code | Don't modify |
| `unit2_nonlinear_review.html` | Reference for structure | Don't modify |

---

## Grading Config Quick Reference

```js
// Q1-Q3: dropdown value matching
[['q1_parent', 'cubic']], // select element .value
[['q2_parent', 'absolute'], ['q2_x1', -1, 0.1], ['q2_x2', -7, 0.1]],
[['q3_parent', 'quadratic'], ['q3_x1', 3, 0.1], ['q3_x2', -1, 0.1]],

// Q4-Q11: numeric with tolerance
[['q4_answer', 2, 0.01]],
[['q5_x1', 0.5, 0.1], ['q5_x2', -1.5, 0.1]], // either-box matching needed
[['q6_x1', 2.236, 0.01], ['q6_x2', -2.236, 0.01]],
[['q7_answer', 2, 0.01]],
[['q8_answer', 5.667, 0.01]],
[['q9_answer', 3, 0.01]],
[['q10_x1', 2.236, 0.01], ['q10_x2', -2.236, 0.01]], // either-box
[['q11_answer', 9, 0.01]],

// Q12-Q13: vertex/asymptote inputs (graph checked separately)
[['q12_vx', -2, 0.1], ['q12_vy', 5, 0.1]],
[['q13_va', 1, 0.1], ['q13_ha', -2, 0.1]],

// Q14: radio button value matching
[['q14_answer', 'sqrt(A/pi)']],

// Q15: numeric
[['q15_answer', 20, 0.5]],
```

## Question Type/Standard Map
```
q1:  { type: "identify",       standard: "W2" }
q2:  { type: "identify",       standard: "W2" }
q3:  { type: "identify",       standard: "W2" }
q4:  { type: "exponential",    standard: "W3" }
q5:  { type: "quadratic",      standard: "W3" }
q6:  { type: "radical",        standard: "W3" }
q7:  { type: "exponential",    standard: "W3" }
q8:  { type: "rational",       standard: "W3" }
q9:  { type: "radical",        standard: "W3" }
q10: { type: "exponential",    standard: "W3" }
q11: { type: "fractional-exp", standard: "W3" }
q12: { type: "graph-quad",     standard: "W2" }
q13: { type: "graph-rational", standard: "W2" }
q14: { type: "formula",        standard: "W3" }
q15: { type: "word-problem",   standard: "W3" }
```
