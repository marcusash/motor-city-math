<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra 2 - Unit 1 Exam</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        input, textarea {
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 0;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #8B1E3F;
        }

        h1 {
            color: #8B1E3F;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 400;
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .question-card {
            background: #ffffff;
            border: 1px solid #e0e0e0;
            border-left: 4px solid #8B1E3F;
            padding: 30px;
            margin-bottom: 25px;
            border-radius: 0;
            transition: box-shadow 0.2s;
        }

        .question-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .question-number {
            color: #8B1E3F;
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .question-text {
            color: #333;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .chart-container {
            max-width: 700px;
            height: 450px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        .input-group textarea {
            width: 100%;
            padding: 14px;
            padding-bottom: 20px;
            padding-right: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            min-height: 80px;
            font-family: inherit;
            transition: border-color 0.3s;
            resize: vertical;
            box-sizing: border-box;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #8B1E3F;
        }

        .submit-btn {
            background: #8B1E3F;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 40px auto 20px;
            transition: background 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .submit-btn:hover {
            background: #6B1530;
        }

        .print-btn {
            background: white;
            color: #8B1E3F;
            border: 2px solid #8B1E3F;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .print-btn:hover {
            background: #8B1E3F;
            color: white;
        }

        .answer-key-btn {
            background: #8B1E3F;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 3px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .answer-key-btn:hover {
            background: #6B1530;
        }

        .answer-key-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }

        .answer-key-content {
            background: white;
            max-width: 1000px;
            margin: 50px auto;
            padding: 40px;
            border-radius: 0;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
            padding: 0;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
        }

        .close-modal:hover {
            color: #000;
        }

        .answer-key-title {
            color: #8B1E3F;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 400;
            letter-spacing: -0.5px;
            padding-bottom: 20px;
            border-bottom: 3px solid #8B1E3F;
        }

        .answer-item {
            background: #ffffff;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid #e0e0e0;
            border-left: 4px solid #8B1E3F;
            border-radius: 0;
            transition: box-shadow 0.2s;
        }

        .answer-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .answer-item strong {
            color: #8B1E3F;
            font-weight: 600;
        }

        .work-area {
            background: #fafafa;
            border: 1px solid #d0d0d0;
            border-radius: 0;
            padding: 20px;
            margin: 20px 0;
            min-height: 120px;
        }

        .work-area textarea {
            width: 100%;
            min-height: 100px;
            border: 2px solid #ddd;
            background: white;
            resize: vertical;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-size: 0.95em;
            padding: 14px;
            padding-bottom: 20px;
            padding-right: 20px;
            border-radius: 8px;
            box-sizing: border-box;
        }

        .custom-resize-handle {
            position: absolute;
            bottom: 12px;
            right: 12px;
            width: 16px;
            height: 16px;
            cursor: ns-resize;
            color: #999;
            font-size: 20px;
            line-height: 12px;
            user-select: none;
            transform: rotate(90deg);
        }

        .work-label {
            font-weight: 600;
            color: #8B1E3F;
            margin-bottom: 10px;
            display: block;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }

        .final-answer-box {
            background: #fafafa;
            border: 2px solid #8B1E3F;
            border-radius: 0;
            padding: 20px;
            margin-top: 15px;
        }

        .final-answer-label {
            font-weight: 600;
            color: #8B1E3F;
            margin-bottom: 12px;
            display: block;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }



        .calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #8B1E3F;
        }

        .calc-title {
            font-weight: bold;
            color: #8B1E3F;
            font-size: 1.2em;
        }

        .calc-close {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            padding: 0;
        }

        .calc-display {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: right;
            font-family: 'Courier New', monospace;
            background: #f9fafb;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .calc-btn {
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-btn:hover {
            background: #8B1E3F;
            color: white;
            border-color: #8B1E3F;
        }

        .calc-btn.operator {
            background: #6B1530;
            color: white;
            border-color: #6B1530;
        }

        .calc-btn.operator:hover {
            background: #5a3680;
        }

        .calc-btn.equals {
            background: #10b981;
            color: white;
            border-color: #10b981;
            grid-column: span 2;
        }

        .calc-btn.equals:hover {
            background: #059669;
        }

        .calc-btn.clear {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        .calc-btn.clear:hover {
            background: #dc2626;
        }

        .calc-toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 20px;
            font-size: 1.5em;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.2s;
            z-index: 998;
        }

        .calc-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.6);
        }

        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color: #000 !important;
                background: white !important;
                border-color: #000 !important;
            }

            body {
                background: white !important;
                padding: 0;
            }

            .container {
                box-shadow: none;
                padding: 20px;
                max-width: 100%;
                background: white !important;
            }

            .question-card {
                background: white !important;
                border: 2px solid #000 !important;
                border-left: 5px solid #000 !important;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }

            .question-number {
                color: #000 !important;
                border-bottom: 1px solid #000;
                padding-bottom: 5px;
            }

            .chart-container {
                border: 1px solid #000 !important;
                background: white !important;
                page-break-inside: avoid !important;
                height: auto !important;
                max-height: none !important;
                overflow: visible !important;
            }

            canvas {
                -webkit-filter: grayscale(100%) !important;
                filter: grayscale(100%) !important;
                max-width: 100% !important;
                height: auto !important;
                max-height: none !important;
            }

            input, textarea {
                border: 1px solid #000 !important;
                background: white !important;
                color: #000 !important;
                padding: 14px !important;
                box-sizing: border-box !important;
            }
            
            textarea {
                padding-bottom: 20px !important;
                padding-right: 20px !important;
            }

            .submit-btn, .print-btn, .result, .answer-feedback, .answer-key-btn {
                display: none !important;
            }

            .work-area {
                border: 1px solid #000 !important;
                background: white !important;
                min-height: 80px;
            }

            .final-answer-box {
                border: 2px solid #000 !important;
                background: white !important;
            }

            .final-answer-label {
                color: #000 !important;
            }

            header {
                border-bottom: 2px solid #000;
                background: white !important;
            }

            h1 {
                color: #000 !important;
            }

            .subtitle {
                color: #000 !important;
            }

            .question-text {
                color: #000 !important;
            }

            table {
                border: 1px solid #000;
            }

            table td, table th {
                border: 1px solid #000 !important;
                background: white !important;
                color: #000 !important;
            }

            table th {
                background: #e5e5e5 !important;
                color: #000 !important;
            }

            .math-notation {
                background: #e5e5e5 !important;
                border: 1px solid #000;
                color: #000 !important;
            }

            label, .work-label {
                color: #000 !important;
            }
        }

        .result {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            display: none;
        }

        .result.show {
            display: block;
        }

        .correct {
            color: #22c55e;
            background: #f0fdf4;
            border: 2px solid #22c55e;
        }

        .incorrect {
            color: #ef4444;
            background: #fef2f2;
            border: 2px solid #ef4444;
        }

        .answer-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
            white-space: pre-line;
        }

        .answer-feedback.show {
            display: block;
        }

        .math-notation {
            font-family: 'Courier New', monospace;
            background: #f5e6ea;
            padding: 3px 7px;
            border-radius: 2px;
            font-weight: 600;
            color: #8B1E3F;
        }

        table {
            width: 100%;
            max-width: 400px;
            margin: 15px auto;
            border-collapse: collapse;
        }

        table td, table th {
            border: 2px solid #8B1E3F;
            padding: 10px;
            text-align: center;
        }

        table th {
            background: #8B1E3F;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Algebra 2 Practice Test</h1>
            <div class="subtitle">Unit 1 Assessment - Final Prep</div>
            <div style="margin-top: 20px; padding: 15px; background: #fdf5f7; border-radius: 10px; border: 2px solid #8B1E3F;">
                <strong>Standards Covered:</strong>
                <ul style="margin: 10px 0 0 0; padding: 0; list-style: none; column-count: 2; column-gap: 30px; text-align: center;">
                    <li style="margin-bottom: 5px;"><strong>Standard 1.a:</strong> Evaluating expressions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 1.c:</strong> Real-life models and formulas</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 1.d:</strong> Modeling real-life situations</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 2.a:</strong> Multi-step linear equations</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 2.b:</strong> Literal equations</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 2.c:</strong> Linear inequalities</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 2.d:</strong> Graphing inequalities</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.a:</strong> Function composition</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.b:</strong> Sequence analysis</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.c:</strong> Graphing functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.d:</strong> Graph analysis</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.e:</strong> Real-life applications</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.f:</strong> Drawing conclusions from graphs</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.g:</strong> Inverse functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.h:</strong> Function operations</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.i:</strong> Finding inverse functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.a:</strong> Function evaluation</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.c:</strong> Writing equations from points</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.d:</strong> Scatterplots and best fit lines</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 5.a:</strong> Exponential models</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 5.b & 5.c:</strong> Exponential growth/decay</li>
                </ul>
            </div>
        </header>

        <form id="testForm">
            <!-- Q1: Standard 1.a - Evaluating expressions -->
            <div class="question-card">
                <div class="question-number">Question 1 - Standard 1.a</div>
                <div class="question-text">
                    If <span class="math-notation">p = -4</span> and <span class="math-notation">q = 3</span>, evaluate the expression:
                    <br><br>
                    <span class="math-notation">3pq - q²(4p - 2q) + p²q</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work1" placeholder="Show your calculations step by step..."></textarea>
                </div>
                <div class="input-group">
                    <label>Final Answer:</label>
                    <input type="text" id="q1">
                </div>
            </div>

            <!-- Q2: Baseball height problem -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <div class="question-text">
                    The height <span class="math-notation">h</span>, in meters, of a baseball above the ground <span class="math-notation">t</span> seconds after being hit is modeled by the formula <span class="math-notation">h = 1 + 12t - 4.9t²</span>. 
                    <br><br>
                    How high is the ball 2 seconds after being hit?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work2" placeholder="Substitute t = 2 and calculate..."></textarea>
                </div>
                <div class="input-group">
                    <label>Height (in meters):</label>
                    <input type="text" id="q2">
                </div>
            </div>

            <!-- Q3: Productivity formula -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <div class="question-text">
                    A company determines an employee's yearly productivity score using the formula <span class="math-notation">P = (ks - b)/r</span>, where:
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li><span class="math-notation">P</span> = productivity score</li>
                        <li><span class="math-notation">k</span> = efficiency multiplier</li>
                        <li><span class="math-notation">s</span> = number of successful projects</li>
                        <li><span class="math-notation">b</span> = baseline adjustment</li>
                        <li><span class="math-notation">r</span> = rating divisor</li>
                    </ul>
                    <br>
                    <strong>a)</strong> Solve the formula for <span class="math-notation">s</span> in terms of <span class="math-notation">P</span>, <span class="math-notation">k</span>, <span class="math-notation">b</span>, and <span class="math-notation">r</span>.
                    <br><br>
                    <strong>b)</strong> An employee has a productivity score of 92, with <span class="math-notation">k = 3.5</span>, <span class="math-notation">b = 18</span>, and <span class="math-notation">r = 2</span>. Use your formula from part (a) to find the number of successful projects <span class="math-notation">s</span>.
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work3" placeholder="a) Show steps to solve for s... b) Substitute values and calculate..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Formula for s:</label>
                    <input type="text" id="q3a">
                </div>
                <div class="input-group">
                    <label>b) Number of successful projects:</label>
                    <input type="text" id="q3b">
                </div>
            </div>

            <!-- Q4: Kayak rental problem -->
            <div class="question-card">
                <div class="question-number">Question 4</div>
                <div class="question-text">
                    A recreation center rents kayaks and charges:
                    <ul style="margin-left: 30px; margin-top: 10px;">
                        <li>$14.50 launch fee</li>
                        <li>$3.90 per hour of paddling</li>
                        <li>A 7% maintenance tax applied to the subtotal</li>
                        <li>A 15% off-peak discount applied to the total rental amount (including tax)</li>
                    </ul>
                    <br>
                    <strong>a)</strong> Write an equation for the total cost <span class="math-notation">C(h)</span> for renting a kayak for <span class="math-notation">h</span> hours during off-peak hours.
                    <br><br>
                    <strong>b)</strong> If a customer paid $49.39 during off-peak hours, how many hours did they rent the kayak? (Round to the nearest tenth.)
                    <br><br>
                    <strong>c)</strong> What would the same rental cost during normal (non-discount) hours?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work4" placeholder="Write your equation and show all calculations..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Equation for off-peak hours:</label>
                    <input type="text" id="q4a">
                </div>
                <div class="input-group">
                    <label>b) Hours rented:</label>
                    <input type="text" id="q4b">
                </div>
                <div class="input-group">
                    <label>c) Normal hours cost:</label>
                    <input type="text" id="q4c">
                </div>
            </div>

            <!-- Q5: Standard 2.a - Multi-step linear equations -->
            <div class="question-card">
                <div class="question-number">Question 5 - Standard 2.a</div>
                <div class="question-text">
                    Solve for <span class="math-notation">x</span>:
                    <br><br>
                    <span class="math-notation">7x - 4 = 2(3x - 5) - (x + 12)</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work5" placeholder="Show each step of solving the equation..."></textarea>
                </div>
                <div class="input-group">
                    <label>x =</label>
                    <input type="text" id="q5">
                </div>
            </div>

            <!-- Q6: Standard 2.b - Literal equations -->
            <div class="question-card">
                <div class="question-number">Question 6 - Standard 2.b</div>
                <div class="question-text">
                    Solve for <span class="math-notation">k</span> in terms of <span class="math-notation">a</span> and <span class="math-notation">b</span>:
                    <br><br>
                    <span class="math-notation">7 + 4k - b = 3a(2k + ab)</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work6" placeholder="Show how you isolate k..."></textarea>
                </div>
                <div class="input-group">
                    <label>k =</label>
                    <input type="text" id="q6">
                </div>
            </div>

            <!-- Q7: Standards 2.c & 2.d - Linear inequalities and graphing -->
            <div class="question-card">
                <div class="question-number">Question 7 - Standards 2.c & 2.d</div>
                <div class="question-text">
                    Solve for <span class="math-notation">x</span>:
                    <br><br>
                    <span class="math-notation">-<sup>3</sup>/<sub>4</sub>x + <sup>5</sup>/<sub>2</sub> > <sup>1</sup>/<sub>3</sub>(9x - 6)</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work7" placeholder="Show each step of solving the inequality..."></textarea>
                </div>
                <div class="input-group">
                    <label>Solution:</label>
                    <input type="text" id="q7">
                </div>
                <div class="input-group">
                    <label>Graph description (Is the circle filled or open? Which direction is the arrow?):</label>
                    <textarea id="q7graph" style="min-height: 60px;"></textarea>
                </div>
            </div>

            <!-- Q8: Standard 3.a - Function composition -->
            <div class="question-card">
                <div class="question-number">Question 8 - Standard 3.a</div>
                <div class="question-text">
                    Given <span class="math-notation">f(x) = -3x + 7</span> and <span class="math-notation">g(x) = x<sup>2</sup> - 4x - 1</span>
                    <br><br>
                    Find <span class="math-notation">f(g(-3))</span>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea id="work8" placeholder="Find g(-3) first, then substitute into f(x)..."></textarea>
                </div>
                <div class="input-group">
                    <label>f(g(-3)) =</label>
                    <input type="text" id="q8">
                </div>
            </div>

            <button type="button" class="print-btn" onclick="window.print()">Print Version (Black & White)</button>
            <button type="button" class="answer-key-btn" onclick="showAnswerKey()">View Answer Key</button>
            <button type="button" class="answer-key-btn" onclick="saveResults()" style="background: #2563eb;">Save Results</button>
            <button type="button" class="answer-key-btn" onclick="loadResults()" style="background: #7c3aed;">Load Saved Results</button>
        </form>
    </div>

    <!-- Answer Key Modal -->
    <div id="answerKeyModal" class="answer-key-modal">
        <div class="answer-key-content">
            <button class="close-modal" onclick="closeAnswerKey()">×</button>
            <h2 class="answer-key-title">Answer Key</h2>
            <div id="answerKeyBody"></div>
        </div>
    </div>

    <script>
        // Custom resize handle positioning
        document.addEventListener('DOMContentLoaded', function() {
            const textareas = document.querySelectorAll('textarea');
            textareas.forEach(function(textarea) {
                // Disable default resize
                textarea.style.resize = 'none';
                
                // Create custom resize handle
                const resizeHandle = document.createElement('div');
                resizeHandle.className = 'custom-resize-handle';
                resizeHandle.innerHTML = '⋰';
                
                // Wrap textarea in container
                const wrapper = document.createElement('div');
                wrapper.style.position = 'relative';
                wrapper.style.display = 'inline-block';
                wrapper.style.width = '100%';
                textarea.parentNode.insertBefore(wrapper, textarea);
                wrapper.appendChild(textarea);
                wrapper.appendChild(resizeHandle);
                
                // Add resize functionality
                let startY, startHeight;
                resizeHandle.addEventListener('mousedown', function(e) {
                    startY = e.clientY;
                    startHeight = parseInt(window.getComputedStyle(textarea).height, 10);
                    document.addEventListener('mousemove', doResize);
                    document.addEventListener('mouseup', stopResize);
                    e.preventDefault();
                });
                
                function doResize(e) {
                    textarea.style.height = (startHeight + e.clientY - startY) + 'px';
                }
                
                function stopResize() {
                    document.removeEventListener('mousemove', doResize);
                    document.removeEventListener('mouseup', stopResize);
                }
            });
        });

        function showAnswerKey() {
            const password = prompt("Enter password to view answer key:");
            if (password !== '121274') {
                alert('Incorrect password. Access denied.');
                return;
            }
            
            const answerKeyHTML = `
                <div class="answer-item"><strong>Q1:</strong> 210 (Work: 3pq - q²(4p - 2q) + p²q with p=-4, q=3: 3(-4)(3) - (3)²(4(-4) - 2(3)) + (-4)²(3) = -36 - 9(-16 - 6) + 16(3) = -36 - 9(-22) + 48 = -36 + 198 + 48 = 210)</div>
                <div class="answer-item"><strong>Q2:</strong> 5.4 meters (Work: h = 1 + 12(2) - 4.9(2)² = 1 + 24 - 4.9(4) = 1 + 24 - 19.6 = 5.4)</div>
                <div class="answer-item"><strong>Q3:</strong> a) s = (Pr + b)/k (Work: P = (ks - b)/r, multiply both sides by r: Pr = ks - b, add b: Pr + b = ks, divide by k: s = (Pr + b)/k), b) s = 58 successful projects (Work: s = (92×2 + 18)/3.5 = (184 + 18)/3.5 = 202/3.5 ≈ 57.71 ≈ 58)</div>
                <div class="answer-item"><strong>Q4:</strong> a) C(h) = 0.85(14.50 + 3.90h)(1.07) or C(h) = 0.85 × 1.07(14.50 + 3.90h) or C(h) = 0.9095(14.50 + 3.90h) [Note: 15% discount means multiply by 0.85], b) 10.0 hours (Work: 49.39 = 0.9095(14.50 + 3.90h), divide by 0.9095: 54.29 = 14.50 + 3.90h, subtract 14.50: 39.79 = 3.90h, divide by 3.90: h ≈ 10.2), c) $58.11 (Work: Without discount: (14.50 + 3.90×10.2)(1.07) = 54.28 × 1.07 ≈ 58.08)</div>
                <div class="answer-item"><strong>Q5:</strong> x = -9 (Work: 7x - 4 = 2(3x - 5) - (x + 12), expand: 7x - 4 = 6x - 10 - x - 12, simplify: 7x - 4 = 5x - 22, subtract 5x: 2x - 4 = -22, add 4: 2x = -18, divide by 2: x = -9)</div>
                <div class="answer-item"><strong>Q6:</strong> k = (7 - b - 3a²b)/(4 - 6a) (Work: 7 + 4k - b = 3a(2k + ab), expand: 7 + 4k - b = 6ak + 3a²b, collect k terms: 4k - 6ak = 3a²b + b - 7, factor: k(4 - 6a) = 3a²b + b - 7, divide: k = (3a²b + b - 7)/(4 - 6a))</div>
                <div class="answer-item"><strong>Q7:</strong> x < 6/5 or x < 1.2 (Work: -3/4·x + 5/2 > 1/3(9x - 6), expand: -3/4·x + 5/2 > 3x - 2, multiply by 12: -9x + 30 > 36x - 24, collect terms: -9x - 36x > -24 - 30, -45x > -54, x < 54/45 = 6/5 = 1.2); Graph: Open circle at 6/5 (or 1.2), arrow pointing left</div>
                <div class="answer-item"><strong>Q8:</strong> -53 (Work: g(-3) = (-3)² - 4(-3) - 1 = 9 + 12 - 1 = 20, then f(20) = -3(20) + 7 = -60 + 7 = -53)</div>
            `;
            document.getElementById('answerKeyBody').innerHTML = answerKeyHTML;
            document.getElementById('answerKeyModal').style.display = 'block';
        }

        function closeAnswerKey() {
            document.getElementById('answerKeyModal').style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target === document.getElementById('answerKeyModal')) {
                closeAnswerKey();
            }
        }

        function saveResults() {
            const formData = {};
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                if (input.id) {
                    formData[input.id] = input.value || input.textContent || '';
                }
            });
            
            const saveData = {
                timestamp: new Date().toISOString(),
                formData: formData
            };
            
            localStorage.setItem('algebra2TestResults', JSON.stringify(saveData));
            alert('Results saved successfully! You can reload them anytime.');
        }

        function loadResults() {
            const saved = localStorage.getItem('algebra2TestResults');
            if (!saved) {
                alert('No saved results found.');
                return;
            }
            
            const saveData = JSON.parse(saved);
            const savedDate = new Date(saveData.timestamp).toLocaleString();
            
            if (confirm(`Load results from ${savedDate}?`)) {
                Object.keys(saveData.formData).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.value = saveData.formData[id];
                        } else {
                            element.textContent = saveData.formData[id];
                        }
                    }
                });
                alert('Results loaded successfully!');
            }
        }
    </script>
</body>
</html>
