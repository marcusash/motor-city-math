<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra 2 - Linear Functions Practice Test</title>
    <link rel="stylesheet" href="shared/styles.css">
    <link rel="stylesheet" href="shared/print.css">
    <script src="shared/chart.min.js"></script>
    <script>if(typeof Chart==="undefined"){var s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/chart.js";document.head.appendChild(s);}</script>
    <script src="shared/chart-theme.js"></script>
    <style>
        /* Calculator widget — file-specific */
        .calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #C8102E;
        }

        .calc-title {
            font-weight: bold;
            color: #C8102E;
            font-size: 1.2em;
        }

        .calc-close {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            padding: 0;
        }

        .calc-display {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            border: 2px solid #BEC0C2;
            border-radius: 4px;
            margin-bottom: 15px;
            text-align: right;
            font-family: 'Courier New', monospace;
            background: #f9fafb;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .calc-btn {
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #BEC0C2;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-btn:hover {
            background: #C8102E;
            color: white;
            border-color: #C8102E;
        }

        .calc-btn.operator {
            background: #002D62;
            color: white;
            border-color: #002D62;
        }

        .calc-btn.operator:hover {
            background: #1D42BA;
        }

        .calc-btn.equals {
            background: #10b981;
            color: white;
            border-color: #10b981;
            grid-column: span 2;
        }

        .calc-btn.equals:hover {
            background: #059669;
        }

        .calc-btn.clear {
            background: #C8102E;
            color: white;
            border-color: #C8102E;
        }

        .calc-btn.clear:hover {
            background: #A00D24;
        }

        .calc-toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1D42BA;
            color: white;
            border: none;
            padding: 15px 20px;
            font-size: 1.5em;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(29, 66, 186, 0.4);
            transition: all 0.2s;
            z-index: 998;
        }

        .calc-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(29, 66, 186, 0.6);
        }
    </style>
</head>
<body>
    <a href="#main" class="sr-only">Skip to content</a>
    <div class="container">
        <div class="print-header">
            <strong>Algebra 2 Practice Test</strong><br>
            Name: _____________________ Date: ___________
        </div>
        <header>
            <h1>Algebra 2 Practice Test</h1>
            <div class="subtitle">Linear Functions - Standards 3 & 4</div>
            <div style="margin-top: 20px; padding: 15px; background: #f0f4ff; border-radius: 10px; border: 2px solid #C8102E;">
                <strong>Standards Covered:</strong>
                <ul style="margin: 10px 0 0 0; padding: 0; list-style: none; column-count: 2; column-gap: 30px; text-align: center;">
                    <li style="margin-bottom: 5px;"><strong>Standard 3.a:</strong> Function composition</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.b:</strong> Sequence analysis</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.c:</strong> Graphing functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.d:</strong> Graph analysis</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.e:</strong> Real-life applications</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.f:</strong> Drawing conclusions from graphs</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.g:</strong> Inverse functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.h:</strong> Function operations</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 3.i:</strong> Finding inverse functions</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.a:</strong> Function evaluation</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.c:</strong> Writing equations from points</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 4.d:</strong> Scatterplots and best fit lines</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 5.a:</strong> Exponential models</li>
                    <li style="margin-bottom: 5px;"><strong>Standard 5.b & 5.c:</strong> Exponential growth/decay</li>
                </ul>
            </div>
        </header>

        <form id="testForm">
            <!-- Question 1: Function composition (Standard 3.a) -->
            <div class="question-card">
                <div class="question-number">Question 1 - Standard 3.a</div>
                <div class="question-text" style="display: flex; gap: 30px; align-items: flex-start;">
                    <div style="flex: 1;">
                        <p style="margin-bottom: 20px;">Let the functions <span class="math-notation">f</span>, <span class="math-notation">g</span>, and <span class="math-notation">h</span> be defined as follows:</p>
                        <p style="margin-bottom: 20px;"><span class="math-notation">f(x) = 2x + 3</span></p>
                        <p style="margin-bottom: 20px;">Values of <span class="math-notation">h(x)</span> are shown in the table to the right.</p>
                        <p style="margin-bottom: 20px;">The graph of <span class="math-notation">g(x)</span> is shown below.</p>
                        <div style="margin-top: 30px;">
                            <p style="margin-bottom: 10px;"><span class="math-notation">f(4) - h(2) =</span></p>
                            <p style="margin-bottom: 10px;"><span class="math-notation">g(-3) · h(-1) =</span></p>
                            <p style="margin-bottom: 10px;"><span class="math-notation">f(h(3)) =</span></p>
                            <p style="margin-bottom: 10px;"><span class="math-notation">g(f(2)) =</span></p>
                            <p style="margin-bottom: 10px;"><span class="math-notation">g(h<sup>-1</sup>(3)) =</span></p>
                        </div>
                    </div>
                    <div style="flex: 0 0 300px;">
                        <table style="margin-bottom: 30px;">
                            <tr>
                                <th>x</th>
                                <th>h(x)</th>
                            </tr>
                            <tr><td>-3</td><td>8</td></tr>
                            <tr><td>-1</td><td>6</td></tr>
                            <tr><td>0</td><td>3</td></tr>
                            <tr><td>2</td><td>1</td></tr>
                            <tr><td>3</td><td>-2</td></tr>
                        </table>
                        <div class="chart-container" style="height: 350px; padding: 10px;">
                            <canvas id="chart1"></canvas>
                        </div>
                    </div>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>f(4) - h(2) =</label>
                        <input type="text" id="q1a">
                    </div>
                    <div class="input-group">
                        <label>g(-3) · h(-1) =</label>
                        <input type="text" id="q1b">
                    </div>
                    <div class="input-group">
                        <label>f(h(3)) =</label>
                        <input type="text" id="q1c">
                    </div>
                    <div class="input-group">
                        <label>g(f(2)) =</label>
                        <input type="text" id="q1d">
                    </div>
                    <div class="input-group">
                        <label>g(h<sup>-1</sup>(3)) =</label>
                        <input type="text" id="q1e">
                    </div>
                </div>

                <div class="answer-feedback" id="feedback1"></div>
            </div>

            <!-- Question 2: Sequence analysis (Standard 3.b) -->
            <div class="question-card">
                <div class="question-number">Question 2 - Standard 3.b</div>
                <div class="question-text">
                    For each sequence, explain whether it can be modeled by a linear function, an exponential function, or neither. Explain how you know.
                    <br><br>
                    <div style="margin-left: 20px;">
                        <p style="margin-bottom: 15px;">A: -5, 2, 9, 16, 23, ...</p>
                        <p style="margin-bottom: 15px;">B: 3, 9, 27, 81, 243, ...</p>
                        <p style="margin-bottom: 15px;">C: 64, 32, 16, 8, 4, ...</p>
                        <p style="margin-bottom: 15px;">D: 7, 14, 22, 31, 41, ...</p>
                        <p style="margin-bottom: 15px;">E: 50, 42, 34, 26, 18, ...</p>
                    </div>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="For each sequence, show your analysis and reasoning..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="input-group">
                        <label>A: Type of function:</label>
                        <input type="text" id="q2a" placeholder="Linear, Exponential, or Neither">
                    </div>
                    <div class="input-group">
                        <label>A: Explanation:</label>
                        <textarea id="q2a_exp" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>B: Type of function:</label>
                        <input type="text" id="q2b" placeholder="Linear, Exponential, or Neither">
                    </div>
                    <div class="input-group">
                        <label>B: Explanation:</label>
                        <textarea id="q2b_exp" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>C: Type of function:</label>
                        <input type="text" id="q2c" placeholder="Linear, Exponential, or Neither">
                    </div>
                    <div class="input-group">
                        <label>C: Explanation:</label>
                        <textarea id="q2c_exp" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>D: Type of function:</label>
                        <input type="text" id="q2d" placeholder="Linear, Exponential, or Neither">
                    </div>
                    <div class="input-group">
                        <label>D: Explanation:</label>
                        <textarea id="q2d_exp" style="min-height: 60px;"></textarea>
                    </div>
                    <div class="input-group">
                        <label>E: Type of function:</label>
                        <input type="text" id="q2e" placeholder="Linear, Exponential, or Neither">
                    </div>
                    <div class="input-group">
                        <label>E: Explanation:</label>
                        <textarea id="q2e_exp" style="min-height: 60px;"></textarea>
                    </div>
                </div>

                <div class="answer-feedback" id="feedback2"></div>
            </div>

            <!-- Question 3: Graphing functions (Standard 3.c) -->
            <div class="question-card">
                <div class="question-number">Question 3 - Standard 3.c</div>
                <div style="margin-bottom: 20px;">
                    <p style="margin-bottom: 15px;"><strong>Graphs of Functions</strong></p>
                    <p style="margin-bottom: 15px;">We can graph functions by assigning input values to <span class="math-notation">x</span> and output values to <span class="math-notation">y</span> so that <span class="math-notation">y = f(x)</span>. By picking values for <span class="math-notation">x</span> and using the definition of the function, calculate values of <span class="math-notation">y</span> and plot points to reveal the shape of the graph. Once you have enough points to see what's happening, draw a handsome curve. <strong>Remember to label the scale on your axes</strong>.</p>
                    <p style="margin-bottom: 15px;">Given <span class="math-notation">f(x) = 3x - x²</span>, make a table of values, plot points, and draw a graph of <span class="math-notation">y = f(x)</span>.</p>
                </div>
                <div style="display: flex; gap: 30px; align-items: center; margin-bottom: 20px;">
                    <div style="flex: 0 0 auto;">
                        <table style="display: inline-block;">
                            <tr>
                                <th>x</th>
                                <th>f(x)</th>
                            </tr>
                            <tr>
                                <td>-2</td>
                                <td><input type="number" id="q3_table1" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>-1</td>
                                <td><input type="number" id="q3_table2" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>0</td>
                                <td><input type="number" id="q3_table3" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td><input type="number" id="q3_table4" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="number" id="q3_table5" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><input type="number" id="q3_table6" style="width: 80px; padding: 5px;"></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td><input type="number" id="q3_table7" style="width: 80px; padding: 5px;"></td>
                            </tr>
                        </table>
                    </div>
                    <div style="flex: 1; background: #f0f4ff; padding: 15px; border-radius: 8px; border: 2px solid #C8102E;">
                        <p style="font-weight: bold; margin-bottom: 10px; color: #C8102E;">How to Use the Graph:</p>
                        <ul style="list-style: none; padding: 0; margin: 0; line-height: 1.8; font-size: 0.9em;">
                            <li style="margin-bottom: 8px;">• <strong>Click</strong> on the canvas to plot points (red dots will appear)</li>
                            <li style="margin-bottom: 8px;">• Points are automatically connected with lines as you plot them</li>
                            <li style="margin-bottom: 8px;">• <strong>Right-click</strong> anywhere on the canvas to clear all points and start over</li>
                            <li style="margin-bottom: 8px;">• The grid shows scale numbers from -11 to 11 on both axes</li>
                            <li style="margin-bottom: 8px;">• Points and lines appear in red for visibility</li>
                        </ul>
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="display: inline-block; border: 2px solid #333; background: white; padding: 15px;">
                        <canvas id="chart3" width="700" height="700" style="display: block; cursor: crosshair;"></canvas>
                    </div>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your calculations for the table values..."></textarea>
                </div>

                <div class="answer-feedback" id="feedback3"></div>
            </div>

            <!-- Question 4: Graph analysis (Standard 3.d) -->
            <div class="question-card">
                <div class="question-number">Question 4 - Standard 3.d</div>
                <div class="question-text" style="display: flex; gap: 30px; align-items: flex-start;">
                    <div style="flex: 1;">
                        <p style="margin-bottom: 20px;">The graph of <span class="math-notation">y = h(x)</span> is shown to the right.</p>
                        <div style="margin-left: 20px;">
                            <p style="margin-bottom: 15px;"><span class="math-notation">h(-2) ≈</span> <input type="text" id="q4a" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h(1/2) =</span> <input type="text" id="q4b" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h(0) =</span> <input type="text" id="q4c" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h<sup>-1</sup>(1) ≈</span> <input type="text" id="q4d" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h<sup>-1</sup>(3) =</span> <input type="text" id="q4e" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h<sup>-1</sup>(3.5) =</span> <input type="text" id="q4f" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h</span> is increasing when: <input type="text" id="q4g" style="width: 150px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;"><span class="math-notation">h</span> is decreasing when: <input type="text" id="q4h" style="width: 150px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;">The domain of <span class="math-notation">h</span> is: <input type="text" id="q4i" style="width: 150px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;">The range of <span class="math-notation">h</span> is: <input type="text" id="q4j" style="width: 150px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;">The maximum value of <span class="math-notation">h</span> is: <input type="text" id="q4k" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;">The x-intercept of the graph of <span class="math-notation">h</span> is: <input type="text" id="q4l" style="width: 80px; padding: 5px;"></p>
                            <p style="margin-bottom: 15px;">The y-intercept of the graph of <span class="math-notation">h</span> is: <input type="text" id="q4m" style="width: 80px; padding: 5px;"></p>
                        </div>
                    </div>
                    <div style="flex: 0 0 350px;">
                        <div class="chart-container" style="height: 400px; padding: 10px;">
                            <canvas id="chart4"></canvas>
                        </div>
                    </div>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your reasoning and approximations..."></textarea>
                </div>

                <div class="answer-feedback" id="feedback4"></div>
            </div>

            <!-- Question 5: Real-life graph (Standard 3.e) -->
            <div class="question-card">
                <div class="question-number">Question 5 - Standard 3.e</div>
                <div class="question-text">
                    A candle starts at 8 inches and burns at 0.5 inches/hour.
                    <br><br>
                    a) Write equation for height <span class="math-notation">h</span> after <span class="math-notation">t</span> hours
                    <br>b) What is the slope? What does it mean?
                    <br>c) When does the candle burn out?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Equation:</label>
                    <input type="text" id="q5a">
                </div>
                <div class="input-group">
                    <label>b) Slope:</label>
                    <input type="number" step="0.1" id="q5b">
                </div>
                <div class="input-group">
                    <label>What does slope mean?</label>
                    <textarea id="q5c"></textarea>
                </div>
                <div class="input-group">
                    <label>c) Hours to burn out:</label>
                    <input type="number" id="q5d">
                </div>

                <div class="answer-feedback" id="feedback5"></div>
            </div>

            <!-- Question 6: Draw conclusions (Standard 3.f) -->
            <div class="question-card">
                <div class="question-number">Question 6 - Standard 3.f</div>
                <div class="question-text">
                    Temperature changes throughout a day:
                </div>
                <div class="chart-container">
                    <canvas id="chart6"></canvas>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Analyze graph, find slope from hour 6-8, extrapolate to hour 10..."></textarea>
                </div>
                <div class="final-answer-box">
                    <label class="final-answer-label">Final Answers:</label>
                    <div class="question-text">
                        a) When is temperature increasing? From hour <input type="number" id="q6a" style="width:60px"> to <input type="number" id="q6b" style="width:60px">
                        <br><br>
                        b) Maximum temperature: <input type="number" id="q6c" style="width:80px"> °F
                        <br><br>
                        c) If hour 6-8 trend continues, predict temp at hour 10: <input type="number" id="q6d" style="width:80px"> °F
                    </div>
                </div>

                <div class="answer-feedback" id="feedback6"></div>
            </div>

            <!-- Question 7: Inverse functions (Standard 3.g) -->
            <div class="question-card">
                <div class="question-number">Question 7 - Standard 3.g</div>
                <div class="question-text">
                    Concert tickets: <span class="math-notation">C(t) = 45t + 25</span>
                    <br><br>
                    a) Find inverse function <span class="math-notation">C<sup>-1</sup>(t)</span>
                    <br>b) If someone spent $385, how many tickets?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Inverse function:</label>
                    <input type="text" id="q7a">
                </div>
                <div class="input-group">
                    <label>b) Tickets for $385:</label>
                    <input type="number" id="q7b">
                </div>

                <div class="answer-feedback" id="feedback7"></div>
            </div>

            <!-- Question 8: Function operations (Standard 3.h) -->
            <div class="question-card">
                <div class="question-number">Question 8 - Standard 3.h</div>
                <div class="question-text">
                    Business functions:
                    <br>Revenue: <span class="math-notation">R(x) = 30x</span>
                    <br>Cost: <span class="math-notation">C(x) = 12x + 500</span>
                    <br><br>
                    a) Write profit function <span class="math-notation">P(x) = R(x) - C(x)</span>
                    <br>b) Break-even quantity?
                    <br>c) Profit for 50 products?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Profit function:</label>
                    <input type="text" id="q8a">
                </div>
                <div class="input-group">
                    <label>b) Break-even:</label>
                    <input type="number" step="0.01" id="q8b">
                </div>
                <div class="input-group">
                    <label>c) Profit for 50 ($):</label>
                    <input type="number" id="q8c">
                </div>

                <div class="answer-feedback" id="feedback8"></div>
            </div>

            <!-- Question 9: Inverse functions (Standard 3.i) -->
            <div class="question-card">
                <div class="question-number">Question 9 - Standard 3.i</div>
                <div class="question-text">
                    If <span class="math-notation">f(x) = 4x + 8</span>, what is <span class="math-notation">f<sup>-1</sup>(-4)</span>?
                    <br><br>
                    Then find the inverse function <span class="math-notation">f<sup>-1</sup>(x)</span> for any value of x.
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your steps to find the inverse function and evaluate it..."></textarea>
                </div>
                <div class="input-group">
                    <label>f<sup>-1</sup>(-4) =</label>
                    <input type="text" id="q9a" style="width: 100px;">
                </div>
                <div class="input-group">
                    <label>f<sup>-1</sup>(x) =</label>
                    <input type="text" id="q9b" style="width: 200px;">
                </div>

                <div class="answer-feedback" id="feedback9"></div>
            </div>

            <!-- Question 10: Function composition with fractions (Standard 4.a) -->
            <div class="question-card">
                <div class="question-number">Question 10 - Standard 4.a</div>
                <div class="question-text">
                    If <span class="math-notation">h(x) = 8x + 5</span> and <span class="math-notation">h(<sup>3</sup>/<sub>4</sub>) = p</span>, what is the value of <span class="math-notation">p</span>?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your calculation substituting 3/4 into the function..."></textarea>
                </div>
                <div class="input-group">
                    <label>p =</label>
                    <input type="text" id="q10a" style="width: 120px;">
                </div>

                <div class="answer-feedback" id="feedback10"></div>
            </div>

            <!-- Question 12: Writing equations from two points (Standard 4.c) -->
            <div class="question-card">
                <div class="question-number">Question 12 - Standard 4.c</div>
                <div class="question-text">
                    <strong>Writing the Equation of a Line from Two Points</strong>
                    <br><br>
                    Sarah is renting a car. The rental company charges a flat fee for the rental plus an additional fee per mile driven. If Sarah drives 12 miles, her total cost will be $62. Instead, she ended up driving 20 miles and her total cost was $78.
                    <br><br>
                    Write a model to represent the situation.
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show your work finding the slope and equation..."></textarea>
                </div>
                <div class="input-group">
                    <label>What is the additional fee per mile driven?</label>
                    <input type="text" id="q12a" style="width: 120px;">
                </div>
                <div class="input-group">
                    <label>What is the flat fee for the rental?</label>
                    <input type="text" id="q12b" style="width: 120px;">
                </div>
                <div class="input-group">
                    <label>How much would Sarah pay if she had only driven 15 miles?</label>
                    <input type="text" id="q12c" style="width: 120px;">
                </div>

                <div class="answer-feedback" id="feedback12"></div>
            </div>

            <!-- Question 13: Scatterplot and line of best fit (Standard 4.d) -->
            <div class="question-card">
                <div class="question-number">Question 13 - Standard 4.d</div>
                <div class="question-text" style="display: flex; gap: 30px; align-items: flex-start;">
                    <div style="flex: 1;">
                        <p style="margin-bottom: 20px;">Jessica studied for a math test over several weeks. The scatterplot shows her study time and corresponding test scores for each practice test. The line of best fit for the data is also shown.</p>
                        <p style="margin-bottom: 20px; font-weight: 600;">What do the dots on the graph represent?</p>
                        <textarea id="q13a" style="width: 100%; min-height: 60px; padding: 10px; margin-bottom: 20px;"></textarea>
                        
                        <p style="margin-bottom: 20px; font-weight: 600;">For the practice test where Jessica studied 6 hours, her actual test score was about how many points more than the score predicted by the line of best fit?</p>
                        <input type="text" id="q13b" style="width: 100px; padding: 8px; margin-bottom: 20px;">
                        
                        <p style="margin-bottom: 20px; font-weight: 600;">Write a model for the situation (equation for the line of best fit).</p>
                        <input type="text" id="q13c" style="width: 250px; padding: 8px; margin-bottom: 20px;">
                        
                        <p style="margin-bottom: 20px; font-weight: 600;">According to your model, what would be the predicted test score for a student who studies 7 hours? Does that seem reasonable according to the data? Explain.</p>
                        <textarea id="q13d" style="width: 100%; min-height: 80px; padding: 10px;"></textarea>
                    </div>
                    <div style="flex: 0 0 400px;">
                        <div class="chart-container" style="height: 450px; padding: 10px;">
                            <canvas id="chart13"></canvas>
                        </div>
                    </div>
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Show calculations for slope, equation, and predictions..."></textarea>
                </div>

                <div class="answer-feedback" id="feedback13"></div>
            </div>

            <!-- Question 15: Exponential models (Standard 5.a) -->
            <div class="question-card">
                <div class="question-number">Question 15 - Standard 5.a</div>
                <div class="question-text">
                    A population of bacteria doubles every 3 hours. The lab starts with 500 bacteria.
                    <br><br>
                    a) Explain why this situation is modeled by an exponential function, not linear.
                    <br>b) Write an exponential model <span class="math-notation">P(t) = a(b)<sup>t</sup></span> where t is the number of 3-hour periods.
                    <br>c) How many bacteria will there be after 9 hours (3 periods)?
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Why exponential?</label>
                    <textarea id="q15a"></textarea>
                </div>
                <div class="input-group">
                    <label>b) Model P(t):</label>
                    <input type="text" id="q15b">
                </div>
                <div class="input-group">
                    <label>c) Bacteria after 9 hours:</label>
                    <input type="number" id="q15c">
                </div>

                <div class="answer-feedback" id="feedback15"></div>
            </div>

            <!-- Question 16: Exponential growth/decay (Standard 5.b & 5.c) -->
            <div class="question-card">
                <div class="question-number">Question 16 - Standard 5.b & 5.c</div>
                <div class="question-text">
                    A car's value depreciates by 15% each year. You bought it for $28,000.
                    <br><br>
                    a) Write an exponential model <span class="math-notation">V(t) = a(1 + r)<sup>t</sup></span> for the car's value after t years.
                    <br>b) What will the car be worth after 4 years?
                    <br>c) Is this exponential growth or decay? Explain how you know.
                </div>
                <div class="work-area">
                    <span class="work-label">Show Your Work:</span>
                    <textarea placeholder="Write your calculations, steps, and reasoning here..."></textarea>
                </div>
                <div class="input-group">
                    <label>a) Model V(t):</label>
                    <input type="text" id="q16a">
                </div>
                <div class="input-group">
                    <label>b) Value after 4 years ($):</label>
                    <input type="number" step="0.01" id="q16b">
                </div>
                <div class="input-group">
                    <label>c) Growth or decay? Why?</label>
                    <textarea id="q16c"></textarea>
                </div>

                <div class="answer-feedback" id="feedback16"></div>
            </div>

            <button type="button" class="print-btn" onclick="printTest()">Print Version (Black & White)</button>
            <button type="button" class="answer-key-btn" onclick="showLinearAnswerKey()">View Answer Key</button>
            <button type="button" class="answer-key-btn" onclick="saveResults('mcm-index-results')" style="background: #1D42BA;">Save Results</button>
            <button type="button" class="answer-key-btn" onclick="loadResults('mcm-index-results')" style="background: #002D62;">Load Saved Results</button>
        </form>

        <div class="result" id="finalResult"></div>
    </div>

    <!-- Answer Key Modal -->
    <div id="answerKeyModal" class="answer-key-modal">
        <div class="answer-key-content">
            <button class="close-modal" onclick="closeAnswerKey()">×</button>
            <h2 class="answer-key-title">Answer Key</h2>
            <div id="answerKeyBody"></div>
        </div>
    </div>

    <script src="shared/scripts.js"></script>
    <script>
        // Initialize textarea resize from shared scripts
        document.addEventListener('DOMContentLoaded', function() {
            initTextareaResize();
        });
        
        // Chart 1 - g(x) function graph
        new Chart(document.getElementById('chart1'), {
            type: 'line',
            data: {
                labels: [-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8],
                datasets: [{
                    label: 'g(x)',
                    data: [1, -2, -3, -1, 2, 4, 3, -1, -2, 1, 3, 2, 0, -1],
                    borderColor: '#e74c3c',
                    backgroundColor: '#e74c3c',
                    borderWidth: 3,
                    pointRadius: 5,
                    pointBackgroundColor: '#e74c3c',
                    pointBorderColor: '#e74c3c',
                    pointBorderWidth: 1,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: false },
                    legend: {
                        display: true,
                        labels: {
                            usePointStyle: false,
                            generateLabels: function(chart) {
                                return chart.data.datasets.map(function(dataset, i) {
                                    return {
                                        text: dataset.label,
                                        fillStyle: dataset.borderColor,
                                        strokeStyle: dataset.borderColor,
                                        lineWidth: 0,
                                        hidden: false,
                                        index: i
                                    };
                                });
                            },
                            boxWidth: 40,
                            boxHeight: 3
                        }
                    }
                },
                scales: {
                    x: { 
                        title: { display: true, text: 'x', font: { size: 16 } }, 
                        ticks: { font: { size: 12 } },
                        grid: { display: true }
                    },
                    y: { 
                        title: { display: true, text: 'y', font: { size: 16 } }, 
                        ticks: { font: { size: 12 } },
                        grid: { display: true }
                    }
                }
            }
        });
        
        // Chart 2
        new Chart(document.getElementById('chart2'), {
            type: 'line',
            data: {
                labels: [0, 1, 2, 3, 4, 5],
                datasets: [{
                    label: 'Monthly Cost ($)',
                    data: [15, 21, 27, 33, 39, 45],
                    borderColor: '#C8102E',
                    backgroundColor: '#C8102E',
                    borderWidth: 3,
                    pointRadius: 5,
                    pointBackgroundColor: '#C8102E',
                    pointBorderColor: '#C8102E',
                    pointBorderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'Cost vs Devices', font: { size: 18 } },
                    legend: {
                        display: true,
                        labels: {
                            usePointStyle: false,
                            generateLabels: function(chart) {
                                return chart.data.datasets.map(function(dataset, i) {
                                    return {
                                        text: dataset.label,
                                        fillStyle: dataset.borderColor,
                                        strokeStyle: dataset.borderColor,
                                        lineWidth: 0,
                                        hidden: false,
                                        index: i
                                    };
                                });
                            },
                            boxWidth: 40,
                            boxHeight: 3
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Devices', font: { size: 16 } }, ticks: { font: { size: 14 } } },
                    y: { title: { display: true, text: 'Cost ($)', font: { size: 16 } }, ticks: { font: { size: 14 } }, beginAtZero: true }
                }
            }
        });

        // Chart 3 - Interactive plotting grid
        (function() {
            const canvas = document.getElementById('chart3');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const points = [];
            const marginLeft = 40;
            const marginRight = 20;
            const marginTop = 20;
            const marginBottom = 35;
            const plotWidth = width - marginLeft - marginRight;
            const plotHeight = height - marginTop - marginBottom;
            
            function drawGrid() {
                ctx.clearRect(0, 0, width, height);
                
                // Draw grid (22x22 for x: -11 to 11, y: -11 to 11)
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 1;
                
                // Vertical lines (x-axis: -11 to 11, 22 divisions)
                for (let i = 0; i <= 22; i++) {
                    const x = marginLeft + (i * plotWidth) / 22;
                    ctx.beginPath();
                    ctx.moveTo(x, marginTop);
                    ctx.lineTo(x, marginTop + plotHeight);
                    ctx.stroke();
                }
                
                // Horizontal lines (y-axis: -11 to 11, 22 divisions)
                for (let i = 0; i <= 22; i++) {
                    const y = marginTop + (i * plotHeight) / 22;
                    ctx.beginPath();
                    ctx.moveTo(marginLeft, y);
                    ctx.lineTo(marginLeft + plotWidth, y);
                    ctx.stroke();
                }
                
                // Draw axes (darker)
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                
                // X-axis (at y=0, which is middle of plot)
                const xAxisY = marginTop + plotHeight / 2;
                ctx.beginPath();
                ctx.moveTo(marginLeft, xAxisY);
                ctx.lineTo(marginLeft + plotWidth, xAxisY);
                ctx.stroke();
                
                // Y-axis (at x=0, which is middle of plot)
                const yAxisX = marginLeft + plotWidth / 2;
                ctx.beginPath();
                ctx.moveTo(yAxisX, marginTop);
                ctx.lineTo(yAxisX, marginTop + plotHeight);
                ctx.stroke();
                
                // Label axes
                ctx.fillStyle = '#000';
                ctx.font = '16px Arial';
                ctx.fillText('x', width - 25, xAxisY - 10);
                ctx.fillText('y', yAxisX + 10, marginTop + 5);
                ctx.fillText('0', yAxisX + 5, xAxisY + 18);
                
                // Draw scale numbers
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                
                // X-axis numbers (-11 to 11)
                for (let i = -11; i <= 11; i++) {
                    if (i !== 0) {
                        const x = marginLeft + plotWidth / 2 + (i * plotWidth / 22);
                        ctx.fillText(i, x, xAxisY + 25);
                    }
                }
                
                // Y-axis numbers (-11 to 11)
                ctx.textAlign = 'right';
                for (let i = -11; i <= 11; i++) {
                    if (i !== 0) {
                        const y = marginTop + plotHeight / 2 - (i * plotHeight / 22);
                        ctx.fillText(i, yAxisX - 8, y + 4);
                    }
                }
                
                ctx.textAlign = 'left';
            }
            
            function drawPoints() {
                ctx.fillStyle = '#e74c3c';
                points.forEach(point => {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 4, 0, 2 * Math.PI);
                    ctx.fill();
                });
            }
            
            function drawLines() {
                if (points.length > 1) {
                    ctx.strokeStyle = '#e74c3c';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(points[0].x, points[0].y);
                    for (let i = 1; i < points.length; i++) {
                        ctx.lineTo(points[i].x, points[i].y);
                    }
                    ctx.stroke();
                }
            }
            
            function redraw() {
                drawGrid();
                drawLines();
                drawPoints();
            }
            
            canvas.addEventListener('click', function(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                points.push({x, y});
                redraw();
            });
            
            canvas.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                points.length = 0;
                redraw();
            });
            
            drawGrid();
        })();

        // Chart 4 - h(x) function graph
        new Chart(document.getElementById('chart4'), {
            type: 'line',
            data: {
                labels: [-4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6],
                datasets: [{
                    label: 'h(x)',
                    data: [-1, 0, 1, 2, 3, 3.5, 3.2, 2.5, 1.8, 2.2, 3],
                    borderColor: '#e74c3c',
                    backgroundColor: '#e74c3c',
                    borderWidth: 3,
                    pointRadius: 5,
                    pointBackgroundColor: '#e74c3c',
                    pointBorderColor: '#e74c3c',
                    pointBorderWidth: 1,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: false },
                    legend: { display: false }
                },
                scales: {
                    x: { 
                        title: { display: true, text: 'x', font: { size: 16 } }, 
                        ticks: { font: { size: 12 } },
                        grid: { display: true }
                    },
                    y: { 
                        title: { display: true, text: 'y', font: { size: 16 } }, 
                        ticks: { font: { size: 12 } },
                        grid: { display: true },
                        min: -2,
                        max: 5
                    }
                }
            }
        });
        
        // Chart 13 - Study time vs test score scatterplot
        new Chart(document.getElementById('chart13'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Test Scores',
                    data: [
                        {x: 2, y: 65}, {x: 3, y: 68}, {x: 3.5, y: 72}, 
                        {x: 4, y: 73}, {x: 4.5, y: 78}, {x: 5, y: 75},
                        {x: 5.5, y: 82}, {x: 6, y: 88}, {x: 6.5, y: 84},
                        {x: 7, y: 87}, {x: 7.5, y: 90}, {x: 8, y: 92},
                        {x: 8.5, y: 94}, {x: 9, y: 93}, {x: 9.5, y: 96}
                    ],
                    borderColor: '#333',
                    backgroundColor: '#333',
                    pointRadius: 5,
                    pointHoverRadius: 7
                },
                {
                    label: 'Line of Best Fit',
                    type: 'line',
                    data: [
                        {x: 2, y: 62}, {x: 10, y: 98}
                    ],
                    borderColor: '#000',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    pointRadius: 0,
                    tension: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { 
                        display: true, 
                        text: 'Study Time versus Test Score', 
                        font: { size: 16, weight: 'bold' } 
                    },
                    legend: { display: false }
                },
                scales: {
                    x: { 
                        title: { display: true, text: 'Study time (hours)', font: { size: 14 } },
                        min: 1,
                        max: 10,
                        ticks: { stepSize: 0.5, font: { size: 12 } },
                        grid: { display: true }
                    },
                    y: { 
                        title: { display: true, text: 'Test score (points)', font: { size: 14 } },
                        min: 60,
                        max: 100,
                        ticks: { stepSize: 5, font: { size: 12 } },
                        grid: { display: true }
                    }
                }
            }
        });
        
        // Chart 6
        new Chart(document.getElementById('chart6'), {
            type: 'line',
            data: {
                labels: [0, 2, 4, 6, 8],
                datasets: [{
                    label: 'Temperature (°F)',
                    data: [50, 58, 66, 74, 70],
                    borderColor: '#C8102E',
                    backgroundColor: '#C8102E',
                    borderWidth: 3,
                    pointRadius: 5,
                    pointBackgroundColor: '#C8102E',
                    pointBorderColor: '#C8102E',
                    pointBorderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'Temperature vs Time', font: { size: 18 } },
                    legend: {
                        display: true,
                        labels: {
                            usePointStyle: false,
                            generateLabels: function(chart) {
                                return chart.data.datasets.map(function(dataset, i) {
                                    return {
                                        text: dataset.label,
                                        fillStyle: dataset.borderColor,
                                        strokeStyle: dataset.borderColor,
                                        lineWidth: 0,
                                        hidden: false,
                                        index: i
                                    };
                                });
                            },
                            boxWidth: 40,
                            boxHeight: 3
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: 'Hour', font: { size: 16 } }, ticks: { font: { size: 14 } } },
                    y: { title: { display: true, text: 'Temp (°F)', font: { size: 16 } }, ticks: { font: { size: 14 } }, min: 40, max: 80 }
                }
            }
        });

        const answers = {
            // Q1: Function composition (5 parts)
            q1a: 10, q1b: -18, q1c: -1, q1d: 0, q1e: 4,
            // Q2: Sequence classification (5 parts)
            q2a: 'linear', q2b: 'exponential', q2c: 'exponential', q2d: 'neither', q2e: 'linear',
            // Q3: Table values for f(x) = 3x - x²
            q3_table1: -10, q3_table2: -4, q3_table3: 0, q3_table4: 2, q3_table5: 2, q3_table6: 0, q3_table7: -4,
            // Q4: Graph analysis (numeric parts only; intervals g-j are self-graded)
            q4a: 1, q4b: 3.25, q4c: 3, q4d: -2, q4e: 0, q4f: 1, q4k: 3.5, q4l: -3, q4m: 3,
            // Q5: Candle problem
            q5a: 'h=8-0.5t', q5b: -0.5, q5c: 'burn', q5d: 16,
            // Q6: Temperature analysis
            q6a: 0, q6b: 6, q6c: 74, q6d: 66,
            // Q7: Ticket pricing
            q7a: 't=(c-25)/45', q7b: 8,
            // Q8: Profit function
            q8a: 'p(x)=18x-500', q8b: 27.78, q8c: 400,
            // Q9: Inverse function
            q9a: -3, q9b: '(x-8)/4',
            // Q10: Function evaluation
            q10a: 11,
            // Q12: Car rental (two points)
            q12a: 2, q12b: 38, q12c: 68,
            // Q13: Scatterplot (auto-graded parts; a,d are self-graded textareas)
            q13b: 8, q13c: 'y=4.5x+53',
            // Q15: Exponential growth
            q15a: 'multiply', q15b: 'p(t)=500(2)^t', q15c: 4000,
            // Q16: Exponential decay
            q16a: 'v(t)=28000(0.85)^t', q16b: 14616.18, q16c: 'decay'
        };

        function norm(a) {
            return typeof a === 'string' ? a.toLowerCase().replace(/\s+|\*|\$/g, '') : a;
        }

        function check(user, correct, tol = 0.5) {
            if (typeof correct === 'number') {
                const cleaned = String(user).replace(/[$,]/g, '');
                return Math.abs(parseFloat(cleaned) - correct) <= tol;
            }
            const u = norm(user), c = norm(correct);
            return c.includes('initial') || c.includes('burn') || c.includes('constant') || c.includes('per') || c.includes('base') || c.includes('multiply') || c.includes('decay') ? u.includes(c.substring(0, 4)) : u === c;
        }

        function gradeTest() {
            let score = 0, total = 0;
            const feedbacks = [
                // Q1: Function composition (5 parts)
                ['✓ f(4)-h(2) = 10', '✗ f(4)=11, h(2)=1 → 10',
                 '✓ g(-3)·h(-1) = -18', '✗ g(-3)=-3, h(-1)=6 → -18',
                 '✓ f(h(3)) = -1', '✗ h(3)=-2, f(-2) = -1',
                 '✓ g(f(2)) = 0', '✗ f(2)=7, g(7) = 0',
                 '✓ g(h⁻¹(3)) = 4', '✗ h(0)=3 → h⁻¹(3)=0, g(0)=4'],
                // Q2: Sequence classification (5 parts)
                ['✓ Linear', '✗ Constant difference of +7',
                 '✓ Exponential', '✗ Constant ratio of ×3',
                 '✓ Exponential', '✗ Common ratio of ×0.5',
                 '✓ Neither', '✗ Differences aren\'t constant',
                 '✓ Linear', '✗ Common difference of -8'],
                // Q3: Table values (7 parts)
                ['✓ f(-2) = -10', '✗ 3(-2)-(-2)²= -6-4 = -10',
                 '✓ f(-1) = -4', '✗ 3(-1)-(-1)² = -3-1 = -4',
                 '✓ f(0) = 0', '✗ 3(0)-(0)² = 0',
                 '✓ f(1) = 2', '✗ 3(1)-(1)² = 3-1 = 2',
                 '✓ f(2) = 2', '✗ 3(2)-(2)² = 6-4 = 2',
                 '✓ f(3) = 0', '✗ 3(3)-(3)² = 9-9 = 0',
                 '✓ f(4) = -4', '✗ 3(4)-(4)² = 12-16 = -4'],
                // Q4: Graph analysis (9 numeric parts)
                ['✓ h(-2) = 1', '✗ Read from graph at x=-2',
                 '✓ h(½) = 3.25', '✗ Read from graph at x=0.5',
                 '✓ h(0) = 3', '✗ y-intercept of graph',
                 '✓ h⁻¹(1) = -2', '✗ Find x where h(x)=1',
                 '✓ h⁻¹(3) = 0', '✗ Find x where h(x)=3',
                 '✓ h⁻¹(3.5) = 1', '✗ Find x where h(x)=3.5',
                 '✓ Max = 3.5', '✗ Highest y-value on graph',
                 '✓ x-intercept = -3', '✗ Where h(x) = 0',
                 '✓ y-intercept = 3', '✗ h(0) = 3'],
                // Q5: Candle problem (4 parts)
                ['✓ h = 8 - 0.5t', '✗ h = 8 - 0.5t',
                 '✓ -0.5', '✗ Slope = -0.5 in/hr',
                 '✓ Burn rate', '✗ Rate candle burns down',
                 '✓ 16 hours', '✗ 0 = 8 - 0.5t → t = 16'],
                // Q6: Temperature (4 parts)
                ['✓ Hour 0', '✗ Increasing starts at hour 0',
                 '✓ Hour 6', '✗ Temperature peaks at hour 6',
                 '✓ 74°F', '✗ Maximum temp = 74°F',
                 '✓ 66°F', '✗ Rate: -2°F/hr → 70-4 = 66'],
                // Q7: Tickets (2 parts)
                ['✓ t = (C-25)/45', '✗ Solve C = 45t+25 for t',
                 '✓ 8 tickets', '✗ (385-25)/45 = 8'],
                // Q8: Profit (3 parts)
                ['✓ P(x) = 18x-500', '✗ 30x-(12x+500)',
                 '✓ ≈ 27.78', '✗ 0=18x-500 → x≈27.78',
                 '✓ $400', '✗ 18(50)-500 = 400'],
                // Q9: Inverse function (2 parts)
                ['✓ f⁻¹(-4) = -3', '✗ -4=4x+8 → x=-3',
                 '✓ (x-8)/4', '✗ Swap x,y → y=(x-8)/4'],
                // Q10: Function evaluation (1 part)
                ['✓ p = 11', '✗ 8(¾)+5 = 6+5 = 11'],
                // Q12: Car rental (3 parts)
                ['✓ $2/mile', '✗ (78-62)/(20-12) = 2',
                 '✓ $38', '✗ 62=2(12)+b → b=38',
                 '✓ $68', '✗ 2(15)+38 = 68'],
                // Q13: Scatterplot (2 auto-graded parts)
                ['✓ ≈ 8 points', '✗ Actual minus predicted at x=6',
                 '✓ y = 4.5x + 53', '✗ Slope≈4.5, intercept≈53'],
                // Q15: Exponential growth (3 parts)
                ['✓ Multiplies/doubles', '✗ Repeated multiplication',
                 '✓ P(t) = 500(2)^t', '✗ 500·2^t',
                 '✓ 4000', '✗ 500(2)³ = 4000'],
                // Q16: Exponential decay (3 parts)
                ['✓ V(t)=28000(0.85)^t', '✗ 28000(1-0.15)^t',
                 '✓ $14,616.18', '✗ 28000(0.85)⁴ ≈ 14616.18',
                 '✓ Decay', '✗ Base < 1, value decreases']
            ];

            [
                // Q1: 5 composition parts
                [[['q1a', answers.q1a], ['q1b', answers.q1b], ['q1c', answers.q1c], ['q1d', answers.q1d], ['q1e', answers.q1e]], 'feedback1'],
                // Q2: 5 sequence classifications
                [[['q2a', answers.q2a], ['q2b', answers.q2b], ['q2c', answers.q2c], ['q2d', answers.q2d], ['q2e', answers.q2e]], 'feedback2'],
                // Q3: 7 table values
                [[['q3_table1', answers.q3_table1], ['q3_table2', answers.q3_table2], ['q3_table3', answers.q3_table3], ['q3_table4', answers.q3_table4], ['q3_table5', answers.q3_table5], ['q3_table6', answers.q3_table6], ['q3_table7', answers.q3_table7]], 'feedback3'],
                // Q4: 9 numeric graph-reading parts
                [[['q4a', answers.q4a], ['q4b', answers.q4b, 0.3], ['q4c', answers.q4c], ['q4d', answers.q4d], ['q4e', answers.q4e], ['q4f', answers.q4f], ['q4k', answers.q4k, 0.3], ['q4l', answers.q4l], ['q4m', answers.q4m]], 'feedback4'],
                // Q5: 4 parts
                [[['q5a', answers.q5a], ['q5b', answers.q5b], ['q5c', answers.q5c], ['q5d', answers.q5d]], 'feedback5'],
                // Q6: 4 parts
                [[['q6a', answers.q6a], ['q6b', answers.q6b], ['q6c', answers.q6c], ['q6d', answers.q6d]], 'feedback6'],
                // Q7: 2 parts
                [[['q7a', answers.q7a], ['q7b', answers.q7b]], 'feedback7'],
                // Q8: 3 parts
                [[['q8a', answers.q8a], ['q8b', answers.q8b, 1], ['q8c', answers.q8c]], 'feedback8'],
                // Q9: 2 parts
                [[['q9a', answers.q9a], ['q9b', answers.q9b]], 'feedback9'],
                // Q10: 1 part
                [[['q10a', answers.q10a]], 'feedback10'],
                // Q12: 3 parts
                [[['q12a', answers.q12a], ['q12b', answers.q12b], ['q12c', answers.q12c]], 'feedback12'],
                // Q13: 2 auto-graded parts
                [[['q13b', answers.q13b], ['q13c', answers.q13c]], 'feedback13'],
                // Q15: 3 parts
                [[['q15a', answers.q15a], ['q15b', answers.q15b], ['q15c', answers.q15c]], 'feedback15'],
                // Q16: 3 parts
                [[['q16a', answers.q16a], ['q16b', answers.q16b, 2], ['q16c', answers.q16c]], 'feedback16']
            ].forEach((q, i) => {
                let txt = '', correct = 0;
                q[0].forEach((p, j) => {
                    total++;
                    const element = document.getElementById(p[0]);
                    // Get value from either input or contenteditable div
                    const val = element.value || element.textContent || '';
                    const isCorrect = check(val, p[1], p[2] || 0.5);
                    if (isCorrect) { score++; correct++; txt += feedbacks[i][j*2] + '\n'; }
                    else txt += feedbacks[i][j*2+1] + '\n';
                });
                const fb = document.getElementById(q[1]);
                fb.className = 'answer-feedback show ' + (correct === q[0].length ? 'correct' : 'incorrect');
                fb.textContent = txt;
            });

            const pct = Math.round((score / total) * 100);
            const result = document.getElementById('finalResult');
            result.className = 'result show ' + (pct >= 70 ? 'correct' : 'incorrect');
            result.innerHTML = `<div>Test Complete!</div><div>Score: ${score}/${total} (${pct}%)</div><div style="margin-top:10px;font-size:0.9em;">${
                pct >= 90 ? '🌟 Excellent!' : pct >= 80 ? '👍 Great job!' : pct >= 70 ? '✓ Good!' : '📚 Keep practicing!'
            }</div>`;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showLinearAnswerKey() {
            const answerKeyHTML = `
                <div class="answer-item"><strong>Q1 (Function Composition):</strong><br>
                    f(4) - h(2) = (2(4) + 3) - 1 = 11 - 1 = <strong>10</strong><br>
                    g(-3) · h(-1) = (-3) · 6 = <strong>-18</strong><br>
                    f(h(3)) = f(-2) = 2(-2) + 3 = <strong>-1</strong><br>
                    g(f(2)) = g(2(2) + 3) = g(7) = <strong>0</strong><br>
                    g(h⁻¹(3)) = g(0) = <strong>4</strong> (since h(0) = 3, then h⁻¹(3) = 0)</div>
                
                <div class="answer-item"><strong>Q2 (Sequences):</strong><br>
                    A: <strong>Linear</strong> - Common difference of +7<br>
                    B: <strong>Exponential</strong> - Common ratio of ×3<br>
                    C: <strong>Exponential</strong> - Common ratio of ×0.5 (÷2)<br>
                    D: <strong>Neither</strong> - Differences increase (7, 8, 9, 10)<br>
                    E: <strong>Linear</strong> - Common difference of -8</div>
                
                <div class="answer-item"><strong>Q3 (Graphing f(x) = 3x - x²):</strong><br>
                    Table values: x=-2→-10, x=-1→-4, x=0→0, x=1→2, x=2→2, x=3→0, x=4→-4<br>
                    Graph should show parabola opening downward with vertex around (1.5, 2.25)</div>
                
                <div class="answer-item"><strong>Q4 (Graph Analysis of h(x)):</strong><br>
                    h(-2) ≈ <strong>1</strong><br>
                    h(1/2) = h(0.5) ≈ <strong>3.25</strong><br>
                    h(0) = <strong>3</strong><br>
                    h⁻¹(1) ≈ <strong>-2</strong><br>
                    h⁻¹(3) = <strong>0</strong><br>
                    h⁻¹(3.5) ≈ <strong>1</strong><br>
                    h is increasing when: <strong>-4 ≤ x ≤ 1</strong><br>
                    h is decreasing when: <strong>1 < x ≤ 4</strong> (and increasing again after 4)<br>
                    Domain: <strong>-4 ≤ x ≤ 6</strong> (or [-4, 6])<br>
                    Range: <strong>-1 ≤ y ≤ 3.5</strong> (or [-1, 3.5])<br>
                    Maximum value: <strong>3.5</strong><br>
                    x-intercept: <strong>-3</strong><br>
                    y-intercept: <strong>3</strong></div>
                
                <div class="answer-item"><strong>Q5 (Candle):</strong><br>
                    a) h = 8 - 0.5t or h(t) = 8 - 0.5t<br>
                    b) Slope: <strong>-0.5</strong><br>
                    c) Slope meaning: Candle burns down 0.5 inches per hour<br>
                    d) Burns out in <strong>16 hours</strong> (when h = 0)</div>
                
                <div class="answer-item"><strong>Q6 (Temperature):</strong><br>
                    a) Increasing from hour <strong>0</strong> to <strong>6</strong><br>
                    b) Maximum temperature: <strong>74°F</strong><br>
                    c) Predicted temp at hour 10: <strong>66°F</strong> (slope from 6-8 is -2°F/hr, so 70 + 2(-2) = 66)</div>
                
                <div class="answer-item"><strong>Q7 (Concert Tickets C(t) = 45t + 25):</strong><br>
                    a) Inverse function: <strong>C⁻¹(t) = (t - 25)/45</strong><br>
                    b) <strong>8 tickets</strong> for $385 (C⁻¹(385) = (385 - 25)/45 = 8)</div>
                
                <div class="answer-item"><strong>Q8 (Business Profit):</strong><br>
                    a) P(x) = R(x) - C(x) = 30x - (12x + 500) = <strong>18x - 500</strong><br>
                    b) Break-even: <strong>27.78 products</strong> (or 28 rounded up, when P(x) = 0)<br>
                    c) Profit for 50: P(50) = 18(50) - 500 = <strong>$400</strong></div>
                
                <div class="answer-item"><strong>Q9 (Inverse Functions f(x) = 4x + 8):</strong><br>
                    f⁻¹(-4) = <strong>-3</strong> (solve -4 = 4x + 8, x = -3)<br>
                    f⁻¹(x) = <strong>(x - 8)/4</strong> or <strong>x/4 - 2</strong></div>
                
                <div class="answer-item"><strong>Q10 (Function Evaluation h(x) = 8x + 5):</strong><br>
                    p = h(3/4) = 8(3/4) + 5 = 6 + 5 = <strong>11</strong></div>
                
                <div class="answer-item"><strong>Q12 (Car Rental - Two Points):</strong><br>
                    Points: (12, $62) and (20, $78)<br>
                    a) Fee per mile: <strong>$2/mile</strong> (slope = (78-62)/(20-12) = 16/8 = 2)<br>
                    b) Flat fee: <strong>$38</strong> (using y = mx + b: 62 = 2(12) + b, so b = 38)<br>
                    c) Cost for 15 miles: <strong>$68</strong> (C = 2(15) + 38 = 68)</div>
                
                <div class="answer-item"><strong>Q13 (Study Time Scatterplot):</strong><br>
                    a) Dots represent: Each practice test showing relationship between study time (x-axis) and test score (y-axis)<br>
                    b) At 6 hours, actual score (88) vs predicted (≈80): approximately <strong>8 points</strong> higher<br>
                    c) Line of best fit equation: <strong>y = 4.5x + 53</strong> (slope = (98-62)/(10-2) = 4.5, y-intercept ≈ 53)<br>
                    d) Predicted for 7 hours: 4.5(7) + 53 = <strong>84.5 points</strong>; Yes, reasonable based on data trend</div>
                
                <div class="answer-item"><strong>Q15 (Bacteria Exponential Growth):</strong><br>
                    a) Why exponential: Population <strong>multiplies by constant factor (doubles)</strong> each time period, rather than adding constant amount<br>
                    b) Model: <strong>P(t) = 500(2)ᵗ</strong> where t is number of 3-hour periods<br>
                    c) After 9 hours (t=3 periods): P(3) = 500(2)³ = 500(8) = <strong>4,000 bacteria</strong></div>
                
                <div class="answer-item"><strong>Q16 (Car Depreciation - Exponential Decay):</strong><br>
                    a) Model: <strong>V(t) = 28000(0.85)ᵗ</strong> (initial value × (1 - 0.15)ᵗ)<br>
                    b) After 4 years: V(4) = 28000(0.85)⁴ = 28000(0.52200625) = <strong>$14,616.18</strong><br>
                    c) <strong>Exponential decay</strong> - Base (0.85) is less than 1, causing value to decrease by 15% each year</div>
            `;
            showAnswerKey(answerKeyHTML);
        }


    </script>

    <nav class="test-nav" role="navigation" aria-label="Page navigation" style="text-align:center; padding:20px 0; font-size:0.95em;">
        <a href="index.html" style="color:var(--accent-blue); font-weight:600; margin-right:16px;">← Dashboard</a>
        <a href="parent.html" style="color:var(--accent-navy); font-weight:600;">📊 Parent View</a>
    </nav></body>
</html>
