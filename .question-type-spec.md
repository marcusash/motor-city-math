# Motor City Math — Question Type Specs (D-9)

**Author:** Design Agent
**Date:** 2026-02-17
**Status:** proposed
**Implements:** Question renderer component specs
**Blocking:** Agent A → A-12 (Question renderer from JSON)

---

## Purpose

Motor City Math has 4 question input types. This spec defines the visual component for each so Agent A can build a renderer that takes a question from `data/questions.json` and outputs the correct HTML.

---

## Question Types

| Type | Input Method | Count (current) | Example |
|------|-------------|-----------------|---------|
| **Short Answer** | Text input | ~240 | "Simplify: 3x² · 2x⁵" |
| **Extended Response** | Textarea | ~28 | "Explain why f(x) is exponential" |
| **Numeric** | Number input | ~52 | "Calculate the slope" |
| **Graphing** | Canvas (click-to-plot) | ~28 | "Graph f(x) = 2x + 1" |

No multiple choice, radio buttons, or dropdowns exist currently.

---

## 1. Short Answer

The workhorse. Most questions use this.

### Layout

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  QUESTION 3 — STANDARD 1.A                                   │  pistons-blue, 600, 1.2em
│                                                              │
│  Simplify: (3x⁵)(6x⁻³y⁴)(y⁻²)                              │  dark-gray, 1.1em
│                                                              │
│  ┌────────────────────────────────────────┐                  │
│  │  Enter answer                          │                  │  input-field
│  └────────────────────────────────────────┘                  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### HTML

```html
<div class="question-card" data-question="3" data-standard="1.a" data-type="short">
    <div class="question-header">
        <span class="question-number">QUESTION 3</span>
        <span class="question-standard">STANDARD 1.A</span>
    </div>
    <div class="question-text">
        Simplify: \((3x^5)(6x^{-3}y^4)(y^{-2})\)
    </div>
    <input type="text" class="input-field" id="q3"
           placeholder="Enter answer" autocomplete="off" spellcheck="false">
    <div class="feedback-area" id="fb3"></div>
</div>
```

### CSS (question-header — shared across all types)

```css
.question-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 12px;
}

.question-number {
    font-size: 1.2em;
    font-weight: 600;
    color: #1D42BA;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.question-standard {
    font-size: 0.85em;
    font-weight: 600;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: #F5F5F5;
    padding: 2px 8px;
    border-radius: 3px;
}

.question-text {
    font-size: 1.1em;
    color: #333;
    line-height: 1.6;
    margin-bottom: 16px;
}
```

### Input Sizing

- **Max width:** 400px (prevents answers from stretching across full card)
- **Math answers are short.** Most are under 20 characters.
- **Placeholder:** "Enter answer" — not "Type your answer here" (too wordy)

---

## 2. Multi-Part Question

The most complex layout. A single question with 2-4 labeled parts.

### Layout

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  QUESTION 5 — STANDARD 3.A                                   │
│                                                              │
│  A car purchased for $25,000 depreciates 15% per year.       │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  (a) What is the initial value?                        │  │
│  │  ┌──────────────────────────┐                          │  │
│  │  │  Enter answer             │                          │  │
│  │  └──────────────────────────┘                          │  │
│  ├────────────────────────────────────────────────────────┤  │
│  │  (b) What is the decay factor?                         │  │
│  │  ┌──────────────────────────┐                          │  │
│  │  │  Enter answer             │                          │  │
│  │  └──────────────────────────┘                          │  │
│  ├────────────────────────────────────────────────────────┤  │
│  │  (c) Write the function.                               │  │
│  │  ┌──────────────────────────┐                          │  │
│  │  │  Enter answer             │                          │  │
│  │  └──────────────────────────┘                          │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### HTML

```html
<div class="question-card" data-question="5" data-standard="3.a" data-type="multi-part">
    <div class="question-header">
        <span class="question-number">QUESTION 5</span>
        <span class="question-standard">STANDARD 3.A</span>
    </div>
    <div class="question-text">
        A car purchased for $25,000 depreciates 15% per year.
    </div>
    <div class="question-parts">
        <div class="question-part" data-part="a">
            <label class="part-label">(a) What is the initial value?</label>
            <input type="text" class="input-field" id="q5a"
                   placeholder="Enter answer" autocomplete="off">
            <div class="feedback-area" id="fb5a"></div>
        </div>
        <div class="question-part" data-part="b">
            <label class="part-label">(b) What is the decay factor?</label>
            <input type="text" class="input-field" id="q5b"
                   placeholder="Enter answer" autocomplete="off">
            <div class="feedback-area" id="fb5b"></div>
        </div>
        <div class="question-part" data-part="c">
            <label class="part-label">(c) Write the function.</label>
            <input type="text" class="input-field" id="q5c"
                   placeholder="Enter answer" autocomplete="off">
            <div class="feedback-area" id="fb5c"></div>
        </div>
    </div>
</div>
```

### CSS

```css
.question-parts {
    border: 1px solid #E8E8E8;
    border-radius: 4px;
    overflow: hidden;
}

.question-part {
    padding: 16px 20px;
    border-bottom: 1px solid #E8E8E8;
}

.question-part:last-child {
    border-bottom: none;
}

.part-label {
    display: block;
    font-size: 1em;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
}

.part-label::first-letter {
    color: #1D42BA;
}
```

### Grading

Each part is graded independently. A multi-part question can be partially correct:
- All parts correct → green border on card
- Some correct → warning amber border
- All wrong → red border

---

## 3. Extended Response (Textarea)

For "explain" or "describe" questions. Not auto-graded — these show in the answer key only.

### Layout

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  QUESTION 8 — STANDARD 2.B                                   │
│                                                              │
│  Explain why the function f(x) = 3(0.85)ˣ represents        │
│  exponential decay, not growth.                              │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐    │
│  │                                                      │    │
│  │  Write your explanation...                           │    │  textarea
│  │                                                      │    │
│  │                                                      │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                              │
│  ✏️ Self-graded — check against the answer key                │  caption
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### HTML

```html
<div class="question-card" data-question="8" data-standard="2.b" data-type="extended">
    <div class="question-header">
        <span class="question-number">QUESTION 8</span>
        <span class="question-standard">STANDARD 2.B</span>
    </div>
    <div class="question-text">
        Explain why the function \(f(x) = 3(0.85)^x\) represents
        exponential decay, not growth.
    </div>
    <textarea class="textarea-field" id="q8" rows="4"
              placeholder="Write your explanation..."></textarea>
    <p class="self-grade-note">✏️ Self-graded — check against the answer key</p>
    <div class="feedback-area" id="fb8"></div>
</div>
```

### CSS

```css
.textarea-field {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #BEC0C2;
    border-radius: 4px;
    font-size: 1em;
    font-family: inherit;
    line-height: 1.5;
    resize: vertical;
    min-height: 80px;
    max-height: 300px;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.textarea-field:focus {
    outline: none;
    border-color: #1D42BA;
    box-shadow: 0 0 0 3px rgba(29, 66, 186, 0.15);
}

.self-grade-note {
    font-size: 0.85em;
    color: #666;
    margin-top: 8px;
    font-style: italic;
}
```

### Grading

Extended response is **not auto-graded**. The score card marks these as "self-check" and excludes them from the auto-grade percentage. The answer key shows a model response.

---

## 4. Graphing (Canvas)

Interactive coordinate grids where Kai clicks to plot points.

### Layout

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  QUESTION 12 — STANDARD 3.C                                  │
│                                                              │
│  Graph the function f(x) = -2x + 4 on the coordinate plane. │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐    │
│  │              ↑ y                                      │    │
│  │         ·    │    ·                                   │    │
│  │    ─────·────┼────·─────→ x                          │    │  400×350px canvas
│  │         ·    │    ·                                   │    │
│  │              │                                        │    │
│  │                                                      │    │
│  └──────────────────────────────────────────────────────┘    │
│                                                              │
│  Click to plot points · Right-click to remove                │  caption
│  [ CLEAR ]  [ CONNECT POINTS ]                               │  ghost buttons
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### HTML

```html
<div class="question-card" data-question="12" data-standard="3.c" data-type="graph">
    <div class="question-header">
        <span class="question-number">QUESTION 12</span>
        <span class="question-standard">STANDARD 3.C</span>
    </div>
    <div class="question-text">
        Graph the function \(f(x) = -2x + 4\) on the coordinate plane.
    </div>
    <div class="graph-container">
        <canvas id="graph12" width="400" height="350"></canvas>
    </div>
    <p class="graph-instructions">Click to plot points · Right-click to remove</p>
    <div class="graph-actions">
        <button class="btn-ghost" onclick="clearGraph('graph12')">CLEAR</button>
        <button class="btn-ghost" onclick="connectPoints('graph12')">CONNECT POINTS</button>
    </div>
    <div class="feedback-area" id="fb12"></div>
</div>
```

### CSS

```css
.graph-container {
    border: 2px solid #BEC0C2;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
    background: white;
}

.graph-container canvas {
    display: block;
    width: 100%;
    max-width: 500px;
    cursor: crosshair;
}

.graph-instructions {
    font-size: 0.85em;
    color: #666;
    margin: 4px 0 8px;
}

.graph-actions {
    display: flex;
    gap: 8px;
}

/* Mobile */
@media (max-width: 768px) {
    .graph-container canvas {
        max-width: 100%;
        height: 280px;
    }
}

@media (max-width: 480px) {
    .graph-container canvas {
        height: 240px;
    }
}
```

### Grid Drawing (JS)

The canvas grid is drawn programmatically:
- **Grid lines:** `#E8E8E8`, 1px
- **Axes:** `#333`, 2px
- **Axis labels:** `#666`, 11px
- **Plotted points:** pistons-red `#C8102E`, radius 6, white border 2px
- **Connected line:** pistons-blue `#1D42BA`, 2px

### Grading

Graphing questions are **self-graded**. The answer key shows the correct graph as a Chart.js overlay. Future: auto-grade by comparing plotted points to expected coordinates.

---

## 5. Chart-Embedded Question

Questions that include a Chart.js visualization as context (not for student input).

### Layout

```
┌──────────────────────────────────────────────────────────────┐
│                                                              │
│  QUESTION 6 — STANDARD 2.A                                   │
│                                                              │
│  The scatter plot shows test scores vs. hours studied.       │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐    │
│  │  [Chart.js scatter plot with data points]             │    │  chart container
│  └──────────────────────────────────────────────────────┘    │
│                                                              │
│  (a) Estimate the score for a student who studies 6 hours.   │
│  ┌──────────────────────────┐                                │
│  │  Enter answer             │                                │
│  └──────────────────────────┘                                │
│                                                              │
│  (b) Does the data show a positive or negative correlation?  │
│  ┌──────────────────────────┐                                │
│  │  Enter answer             │                                │
│  └──────────────────────────┘                                │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### Chart Position Rules

- Chart appears **after the question text, before the input(s)**
- Chart height: 300px desktop, 250px phone
- Chart has a subtle border (1px chrome) and 4px border-radius
- Chart uses Pistons theme colors (from `.chart-spec.md`)
- Chart prints in color (`print-color-adjust: exact`)

---

## 6. Feedback Area (Shared)

All question types have a `.feedback-area` that activates after grading.

### States

| State | Border | Background | Content |
|-------|--------|-----------|---------|
| Correct | green left 4px | `#F0FFF4` | "✅" + optional brief note |
| Incorrect (no hint) | red left 4px | `#FFF5F5` | "✗ Incorrect." |
| Incorrect (with hint) | — | — | Hint system takes over (see `.hint-system-spec.md`) |
| Self-check | blue left 4px | `#F0F4FF` | "Check the answer key." |

```css
.feedback-area {
    margin-top: 12px;
    padding: 12px 16px;
    border-radius: 4px;
    display: none;  /* shown after grading */
}

.feedback-area.correct {
    display: block;
    background: #F0FFF4;
    border-left: 4px solid #1B7D3A;
    color: #1B7D3A;
}

.feedback-area.incorrect {
    display: block;
    background: #FFF5F5;
    border-left: 4px solid #C8102E;
    color: #C8102E;
}

.feedback-area.self-check {
    display: block;
    background: #F0F4FF;
    border-left: 4px solid #1D42BA;
    color: #1D42BA;
}
```

---

## 7. Question Card States

The `.question-card` itself changes appearance based on answer state:

```css
/* Unanswered */
.question-card {
    border-left: 4px solid #C8102E;  /* default pistons-red */
}

/* Answered - correct */
.question-card.answered-correct {
    border-left-color: #1B7D3A;
}

/* Answered - incorrect */
.question-card.answered-incorrect {
    border-left-color: #C8102E;  /* stays red */
}

/* Answered - partial (multi-part) */
.question-card.answered-partial {
    border-left-color: #E8A317;
}

/* Current question (for future focus mode) */
.question-card.current {
    box-shadow: 0 0 0 2px rgba(29, 66, 186, 0.3);
}
```

---

## JSON Schema (for Agent R)

Each question type maps to a `type` field in `data/questions.json`:

```json
{
    "type": "short",        // text input
    "type": "multi-part",   // array of sub-questions
    "type": "extended",     // textarea, self-graded
    "type": "graph",        // canvas, self-graded
    "type": "chart-read"    // has embedded chart + short/multi inputs
}
```

Multi-part questions nest their parts:

```json
{
    "type": "multi-part",
    "parts": [
        { "label": "(a) What is the initial value?", "answer": "25000", "type": "short" },
        { "label": "(b) What is the decay factor?", "answer": "0.85", "type": "short" },
        { "label": "(c) Write the function.", "answer": "f(x) = 25000(0.85)^x", "type": "short" }
    ]
}
```

---

*Agent A: Build a `renderQuestion(questionData)` function that reads the `type` field and outputs the correct HTML structure. Each type is a template. Multi-part nests the single-input template. Chart-embedded questions need the Chart.js instance created after DOM insertion. Agent R: Tag every question with the correct type when building `data/questions.json`.*
