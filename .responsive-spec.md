# Motor City Math — Mobile Responsive Spec (D-6)

**Author:** Design Agent
**Date:** 2026-02-17
**Status:** proposed
**Blocking:** Agent A → responsive CSS implementation

---

## Audit Findings

**Current state:** Zero screen-responsive CSS. All 12 files are desktop-only (1000px container) with print media queries only. The viewport meta tag exists in all files, but no breakpoints adjust layout for mobile.

**Issues on mobile (<768px):**
- Container overflows horizontally
- Inputs have fixed widths (80px-250px) — unusable on phone
- Charts don't resize below container
- Buttons don't stack
- Font sizes too large for small screens
- No touch target sizing

---

## Breakpoint System

| Token | Width | Target |
|-------|-------|--------|
| `--bp-desktop` | >1000px | Full layout, 1000px container |
| `--bp-tablet` | 768–999px | Fluid container, 24px padding |
| `--bp-phone` | 480–767px | Stacked layout, reduced type |
| `--bp-small` | <480px | Minimal, everything stacks |

### Implementation: Mobile-First Upgrade

Since existing CSS is desktop-first, the safest migration is adding `max-width` breakpoints that override desktop styles. Don't rewrite — layer on.

```css
/* Tablet */
@media (max-width: 999px) {
    .container {
        max-width: 100%;
        padding: 0 24px;
    }
}

/* Phone */
@media (max-width: 767px) {
    /* Typography */
    h1 { font-size: 1.8em; }
    h2 { font-size: 1.3em; }
    .question-text { font-size: 1em; }

    /* Container */
    .container { padding: 0 16px; }

    /* Question cards */
    .question-card { padding: 20px 16px; }

    /* Inputs full-width */
    input[type="text"],
    input[type="number"],
    .input-field {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box;
    }

    textarea, .textarea-field {
        width: 100% !important;
    }

    /* Buttons stack */
    .button-group {
        flex-direction: column;
        gap: 8px;
    }
    .btn-primary, .btn-secondary, .btn-ghost {
        width: 100%;
        text-align: center;
    }

    /* Charts */
    .chart-container { height: 280px; }
    canvas { max-width: 100% !important; }

    /* Tables scroll horizontally */
    table { display: block; overflow-x: auto; }

    /* Standard cards: 1 column */
    .standards-grid { grid-template-columns: 1fr; }

    /* Multi-part questions */
    .question-part { padding: 12px 16px; }
}

/* Small phone */
@media (max-width: 479px) {
    h1 { font-size: 1.5em; }
    h2 { font-size: 1.2em; }

    .container { padding: 0 12px; }
    .question-card { padding: 16px 12px; margin-bottom: 16px; }

    .chart-container { height: 250px; }

    /* Streak label hidden — emoji + number only */
    .streak-label { display: none; }

    /* Timer compact */
    .timer-value { font-size: 1em; }
}
```

---

## Touch Targets

WCAG 2.5.8 requires 44×44px minimum for touch targets.

```css
@media (max-width: 767px) {
    /* Buttons: minimum 44px height */
    .btn-primary, .btn-secondary, .btn-ghost {
        min-height: 44px;
        padding: 12px 20px;
    }

    /* Inputs: minimum 44px height */
    input[type="text"],
    input[type="number"],
    .input-field {
        min-height: 44px;
        padding: 10px 12px;
        font-size: 16px;  /* prevents iOS zoom on focus */
    }

    /* Hint layer buttons */
    .hint-actions .btn-secondary,
    .hint-actions .btn-ghost {
        min-height: 44px;
        padding: 10px 16px;
    }

    /* Graph canvas touch area */
    .graph-container canvas {
        touch-action: none;  /* prevent scroll when drawing */
    }
}
```

**Critical:** `font-size: 16px` on inputs prevents iOS Safari from auto-zooming on focus. This is the #1 mobile UX issue in form-heavy pages.

---

## Component Responsive Behavior

### Header

| Desktop | Phone |
|---------|-------|
| Title + subtitle + timer on one row | Title stacks, timer below subtitle |
| Stripe motif full width | Stripe motif full width |
| Standards badges inline | Standards badges wrap |

```css
@media (max-width: 767px) {
    .test-header {
        text-align: left;
    }
    .timer {
        display: block;
        margin-top: 4px;
    }
    .standards-badges {
        flex-wrap: wrap;
        gap: 4px;
    }
}
```

### Score Card (post-submission)

| Desktop | Phone |
|---------|-------|
| Score number 3em | Score number 2.2em |
| Standard cards 2-column grid | Standard cards 1-column stack |
| Percentage + progress bar side by side | Stack vertically |

```css
@media (max-width: 767px) {
    .score-card { padding: 24px 16px; }
    .score-number { font-size: 2.2em; }
    .score-pct { font-size: 1.5em; }
    .standards-grid {
        grid-template-columns: 1fr;
        gap: 8px;
    }
}
```

### Dashboard

| Desktop | Phone |
|---------|-------|
| Score history chart 250px | Chart 200px |
| Standard cards 3-column | 1-column |
| "What to study next" full sentences | Truncated |
| Stats bar one line | Two lines |

```css
@media (max-width: 767px) {
    .dashboard .chart-container { height: 200px; }
    .dashboard .standards-grid {
        grid-template-columns: 1fr;
    }
    .study-next-item {
        font-size: 0.9em;
    }
}
```

### Progress Bar (sticky)

```css
@media (max-width: 767px) {
    .progress-bar-sticky {
        padding: 8px 16px;
        font-size: 0.9em;
    }
}
```

### Answer Key Overlay

```css
@media (max-width: 767px) {
    .answer-key-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow-y: auto;
        padding: 16px;
        border-radius: 0;  /* full screen on mobile */
    }
    .answer-key-close {
        position: sticky;
        top: 0;
        z-index: 10;
    }
}
```

---

## Graphing on Mobile

The click-to-plot canvas needs touch support:

```javascript
// Touch event mapping
canvas.addEventListener('touchstart', function(e) {
    e.preventDefault();  // prevent scroll
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    const x = touch.clientX - rect.left;
    const y = touch.clientY - rect.top;
    plotPoint(x, y);
}, { passive: false });
```

- **Touch-action: none** on canvas to prevent scroll interference
- Points are larger on touch (radius 8 instead of 6) for fat-finger tolerance
- "Right-click to remove" becomes "Long press to remove" on touch devices

---

## Testing Checklist (for Agent F)

- [ ] All 12 files render without horizontal scroll at 375px
- [ ] All inputs are usable at 375px (full width, no overflow)
- [ ] All buttons are tappable (44px minimum height)
- [ ] Charts resize without clipping at 375px
- [ ] Score card is readable at 375px
- [ ] Answer key overlay is scrollable on mobile
- [ ] Timer is visible in sticky header on scroll
- [ ] No iOS auto-zoom on input focus (font-size ≥16px)
- [ ] Canvas graphing works with touch events
- [ ] Print layout unaffected by responsive changes

---

*Agent A: Add these media queries to `shared/styles.css`. The `!important` on input widths is needed to override the inline fixed widths in existing HTML. As files are migrated to shared CSS, remove the inline widths and drop the `!important`. Test on Chrome DevTools mobile emulation (iPhone SE, iPhone 14, Pixel 7).*
