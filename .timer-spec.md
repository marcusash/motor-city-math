# Motor City Math â€” Timer Spec (D-16)

**Author:** Design Agent
**Date:** 2026-02-17
**Status:** proposed
**Implements:** Feature #10 (Countdown timer)
**Blocking:** Agent A â†’ timer implementation

---

## Purpose

The countdown timer simulates exam pressure. It shows **time remaining** (not elapsed) â€” an ADHD-specific choice. Remaining time creates gentle urgency without the anxiety of watching elapsed time accumulate.

---

## Placement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”â” red â”â”â”â”â”â”â”â”â” blue â”â”â”â”â”â”â”â”â” red â”â”                      â”‚
â”‚                                                              â”‚
â”‚  ALGEBRA II: EXPONENTS                                       â”‚
â”‚  Unit 1 Â· 20 Questions                              â± 42:15 â”‚  â† timer
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”           â”‚
â”‚                                                              â”‚
â”‚  Question 7 of 20                      ğŸ”¥ 5 in a row        â”‚
```

- **Position:** Header area, right-aligned on the subtitle line.
- **Always visible.** Part of the sticky header when scrolling.
- **Phone:** Moves below subtitle, left-aligned. Full width row.

---

## Visual Design

### Normal State (>10 min remaining)

```
â± 42:15
```

- **Icon:** â± emoji (timer clock)
- **Time:** navy `#002D62`, 600 weight, 1.1em
- **Format:** `MM:SS` â€” no hours (max test is ~60 min)
- **Background:** none

### Warning State (5-10 min remaining)

```
â± 08:30
```

- **Time color shifts:** navy â†’ `#E8A317` (warning amber)
- **No animation.** Just a color change. Subtle enough to notice, not enough to distract.

### Urgent State (<5 min remaining)

```
â± 04:12
```

- **Time color:** pistons-red `#C8102E`
- **Gentle pulse:** Number pulses once every 60 seconds (scale 1â†’1.05â†’1, 0.2s). Not on every tick â€” that would be distracting for ADHD.

### Final Minute (<1 min)

```
â± 0:47
```

- **Time color:** pistons-red `#C8102E`
- **Pulse every 15 seconds** instead of every 60.
- **No sound.** Sound would be startling and counterproductive for focus.

### Time's Up

```
â± TIME
```

- **Display:** Replaces the countdown with the word "TIME" in pistons-red, 700 weight.
- **Behavior:** Auto-submit the test. Show score card.
- **Voice copy:** "Time. Let's see where you are." (from `.voice-guide.md`)
- **The timer does NOT prevent Kai from continuing** â€” it auto-submits but Kai can still review answers. The timer is motivational, not punitive.

---

## Timer Configuration

Each test specifies its time limit in the HTML:

```html
<div class="test-header" data-time-minutes="45">
```

| Test Type | Default Time | Rationale |
|-----------|-------------|-----------|
| 20-question practice | 45 min | ~2.25 min/question |
| 18-question exam | 40 min | ~2.2 min/question |
| 12-question quiz | 25 min | ~2 min/question |
| 8-question mini | 15 min | ~1.9 min/question |

Agent A can override per-test. If no `data-time-minutes`, timer is hidden.

---

## CSS

```css
.timer {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-variant-numeric: tabular-nums;  /* fixed-width digits prevent layout shift */
}

.timer-icon {
    font-size: 1em;
}

.timer-value {
    font-weight: 600;
    font-size: 1.1em;
    color: #002D62;
    transition: color 0.5s ease;
    min-width: 3.5em;  /* prevent layout shift on digit changes */
    text-align: right;
}

/* Warning: 5-10 min */
.timer.warning .timer-value {
    color: #E8A317;
}

/* Urgent: <5 min */
.timer.urgent .timer-value {
    color: #C8102E;
}

/* Gentle pulse */
@keyframes timerPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.timer.pulse .timer-value {
    animation: timerPulse 0.2s ease-out;
}

/* Time's up */
.timer.times-up .timer-value {
    font-weight: 700;
    letter-spacing: 1px;
}

/* Mobile */
@media (max-width: 768px) {
    .timer {
        display: flex;
        margin-top: 4px;
    }
    .timer-value {
        font-size: 1em;
    }
}

/* Print */
@media print {
    .timer { display: none; }
}
```

---

## HTML

```html
<div class="timer" id="timer" role="timer" aria-live="off" aria-label="Time remaining">
    <span class="timer-icon">â±</span>
    <span class="timer-value" id="timer-value">45:00</span>
</div>
```

### Voice Copy Integration

Timer warnings use voice guide copy injected as notifications:

| Trigger | Notification |
|---------|-------------|
| 10 min left | Toast: "10 min. Stay locked in." |
| 5 min left | Toast: "5 min. Finish strong." |
| 1 min left | Toast: "60 seconds. Wrap it up." |
| Time's up | Score card: "Time. Let's see where you are." |

### Toast Notification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â± 5 min. Finish strong.    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Position:** Fixed, top-center, 80px from top
- **Background:** navy `#002D62`
- **Text:** white, 0.95em
- **Duration:** 3 seconds, then fade out
- **No dismiss button** â€” auto-dismisses. Fewer interactions = less distraction.

```css
.timer-toast {
    position: fixed;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    background: #002D62;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 0.95em;
    font-weight: 600;
    z-index: 100;
    animation: toastIn 0.3s ease-out, toastOut 0.3s ease-in 2.7s forwards;
    box-shadow: 0 4px 16px rgba(0, 45, 98, 0.25);
}

@keyframes toastIn {
    from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

@keyframes toastOut {
    from { opacity: 1; }
    to { opacity: 0; }
}
```

---

## Behavior Rules

1. **Timer starts when page loads.** No "start" button. Opening the test = starting the clock.
2. **Timer is motivational, not punitive.** Auto-submit at 0:00 but allow continued review.
3. **No pause button.** Pausing defeats the purpose. If Kai needs a break, he can â€” the timer keeps going like a real exam.
4. **Time is NOT saved to localStorage.** Each test attempt has its own countdown. Fresh start every time.
5. **Timer toast notifications fire once each.** If Kai reloads the page, the timer resets and notifications fire again at their thresholds.
6. **`aria-live="off"`** â€” Screen readers should NOT announce every tick. The timer is visual only. Toast notifications use their own `aria-live="assertive"`.

---

## Accessibility

- `role="timer"` on the container.
- `aria-live="off"` to prevent screen reader noise.
- Toast notifications: `aria-live="assertive"` + `role="alert"` so screen readers announce time warnings.
- Color is not the only indicator â€” the word "TIME" replaces the number at expiry.
- `font-variant-numeric: tabular-nums` prevents layout jitter.

---

*Agent A: Timer is pure JS â€” `setInterval` at 1s. Read `data-time-minutes` from test header on load. State machine: normal â†’ warning (10min) â†’ urgent (5min) â†’ final (1min) â†’ times-up. Toast notifications are DOM elements injected and auto-removed after 3s.*
